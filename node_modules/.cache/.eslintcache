[{"/root/dex/frontend/src/index.js":"1","/root/dex/frontend/src/App.js":"2","/root/dex/frontend/src/reportWebVitals.js":"3","/root/dex/frontend/src/component/Tokens.js":"4","/root/dex/frontend/src/component/Orderbook.js":"5","/root/dex/frontend/src/component/Top.js":"6","/root/dex/frontend/src/component/Chart.js":"7","/root/dex/frontend/src/component/Orderhistory.js":"8","/root/dex/frontend/src/component/Transaction.js":"9","/root/dex/frontend/src/component/Trading.js":"10","/root/dex/frontend/src/hook/useSharedState.ts":"11","/root/dex/frontend/src/component/common.js":"12","/root/dex/frontend/src/component/contract.js":"13","/root/dex/frontend/src/component/const.js":"14","/root/dex/frontend/src/abi/ERC20.js":"15","/root/dex/frontend/src/abi/LIMIT.js":"16","/root/dex/frontend/src/abi/MARKET.js":"17","/root/dex/frontend/src/abi/PAN.js":"18"},{"size":503,"mtime":1650680983000,"results":"19","hashOfConfig":"20"},{"size":1547,"mtime":1651239542000,"results":"21","hashOfConfig":"20"},{"size":362,"mtime":1650270582000,"results":"22","hashOfConfig":"20"},{"size":6931,"mtime":1651473313000,"results":"23","hashOfConfig":"20"},{"size":11890,"mtime":1651289557000,"results":"24","hashOfConfig":"20"},{"size":10075,"mtime":1651620001000,"results":"25","hashOfConfig":"20"},{"size":4612,"mtime":1651620065000,"results":"26","hashOfConfig":"20"},{"size":14850,"mtime":1651291840000,"results":"27","hashOfConfig":"20"},{"size":2947,"mtime":1651020514000,"results":"28","hashOfConfig":"20"},{"size":26912,"mtime":1651323306000,"results":"29","hashOfConfig":"20"},{"size":831,"mtime":1651238949000,"results":"30","hashOfConfig":"20"},{"size":267,"mtime":1650900149000,"results":"31","hashOfConfig":"20"},{"size":477,"mtime":1650848367000,"results":"32","hashOfConfig":"20"},{"size":425,"mtime":1651155209000,"results":"33","hashOfConfig":"20"},{"size":4664,"mtime":1645755771000,"results":"34","hashOfConfig":"20"},{"size":10372,"mtime":1650869202000,"results":"35","hashOfConfig":"20"},{"size":21983,"mtime":1651150443000,"results":"36","hashOfConfig":"20"},{"size":23205,"mtime":1651148799000,"results":"37","hashOfConfig":"20"},{"filePath":"38","messages":"39","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},"18e8b4c",{"filePath":"41","messages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"43","usedDeprecatedRules":"40"},{"filePath":"44","messages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"46","messages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":16,"fixableErrorCount":0,"fixableWarningCount":0,"source":"48"},{"filePath":"49","messages":"50","errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"40"},{"filePath":"52","messages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":31,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"54","messages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":8,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"56","messages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":31,"fixableErrorCount":0,"fixableWarningCount":0,"source":"58","usedDeprecatedRules":"40"},{"filePath":"59","messages":"60","errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"61","usedDeprecatedRules":"40"},{"filePath":"62","messages":"63","errorCount":0,"fatalErrorCount":0,"warningCount":97,"fixableErrorCount":0,"fixableWarningCount":1,"source":"64","usedDeprecatedRules":"40"},{"filePath":"65","messages":"66","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"67","usedDeprecatedRules":"68"},{"filePath":"69","messages":"70","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"71","messages":"72","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"73","messages":"74","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"75","messages":"76","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"77","messages":"78","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"79","messages":"80","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"81","messages":"82","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},"/root/dex/frontend/src/index.js",[],["83","84"],"/root/dex/frontend/src/App.js",["85","86","87"],"// import logo from './logo.svg';\n// import './App.css';\nimport TradingViewWidget, { Themes } from 'react-tradingview-widget';\nimport Top from './component/Top';\nimport Tokens from './component/Tokens';\nimport Chart from './component/Chart';\nimport Orderbook from './component/Orderbook';\nimport Orderhistory from './component/Orderhistory';\nimport Trading from './component/Trading';\nimport Tradehistory from \"./component/Transaction\"\nimport useSharedState from './hook/useSharedState'\nimport { Web3ReactProvider } from '@web3-react/core'\nimport { Web3Provider } from '@ethersproject/providers'\n\nfunction getLibrary(provider) {\n  const library = new Web3Provider(provider)\n  library.pollingInterval = 12000\n  return library\n}\n\nfunction App() {\n  const {selectedToken,setSelectedToken}=useSharedState();//useState(undefined);\n  return (\n  <Web3ReactProvider getLibrary={getLibrary}>\n        <Top></Top>\n        <div className=\"container-fluid\">\n          <div className=\"row\">\n            <div className=\"order-2 order-lg-1 col-12 col-lg-2 p-1 bg-dark text-white filters-widget d-none d-xl-block\">\n              <Tokens></Tokens>\n                <Tradehistory></Tradehistory>\n            </div>\n            <Chart></Chart>\n            {(!selectedToken || selectedToken.info.listed) &&\n              <Orderbook></Orderbook>\n            }\n          </div>\n          <div className=\"row\">\n            <Orderhistory></Orderhistory>\n            <Trading></Trading>\n          </div>\n        </div>\n      </Web3ReactProvider>\n  );\n}\n\nexport default App;\n","/root/dex/frontend/src/reportWebVitals.js",[],"/root/dex/frontend/src/component/Tokens.js",["88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103"],"import useSharedState from '../hook/useSharedState'\r\nimport React ,{useState,useEffect,useCallback,useMemo} from \"react\";\r\nimport io from 'socket.io-client';\r\n\r\nfunction Tokens() {\r\n\r\n  const {selectedToken,setSelectedToken,bnbPrice,setBnbPrice,ask,setAsk,long,setLong,setBid,tokensList,setTokensList}=useSharedState();//useState(undefined);\r\n  const favpos = \"favbsc\";\r\n  const [fav,setFav]=useState(localStorage.getItem(favpos)?JSON.parse(localStorage.getItem(favpos)):{})\r\n  const [sortMode, setSortMode] = useState('CHANGE');\r\n  const options = ['CHANGE', 'VOLUME'];\r\n  const [order,setOrder]=useState(0)\r\n\r\n  const [sortedData, setSortedData] = useState([]);\r\n\r\n  useEffect(() => {\r\n      const init=async()=>{\r\n        const prefix = window.location.protocol+\"//\"+window.location.hostname;\r\n        const url = prefix+\"/api/getdata?op=pairs24h\";\r\n        const response = await fetch(url);\r\n        const pairs = await response.json();\r\n        setTokensList(pairs);\r\n        let search = window.location.search;\r\n        let params = new URLSearchParams(search);\r\n        let symbolparam = params.get('symbol');\r\n        symbolparam = (symbolparam?symbolparam:\"BNBUSDT\").toUpperCase();\r\n        console.log({symbolparam})\r\n        for(let i=0;i<pairs.length;i++){\r\n          if(pairs[i].symbol==\"USDT\"){\r\n            setBnbPrice(Number(pairs[i].priceUSD));\r\n          }\r\n          if(pairs[i].info.base+pairs[i].info.quote==symbolparam){\r\n            if(!selectedToken){\r\n                setSelectedToken(pairs[i]);\r\n            }          \r\n          }\r\n       }\r\n\r\n        const socket = io(prefix);\r\n        socket.emit(\"join\",\"pairs24h\");\r\n          // listen for new messages\r\n        socket.on(\"data\", function(data) {\r\n            setTokensList(data);\r\n            if(selectedToken){\r\n              for(let i=0;i<data.length;i++){\r\n                if(data[i].symbol==selectedToken.symbol){\r\n                  setAsk((ask)=>{\r\n                    setLong(ask<=Number(data[i].priceBNB));\r\n                    return Number(data[i].priceBNB)\r\n                  });\r\n                  setBid(Number(data[i].priceBNB));\r\n\r\n                }\r\n              }\r\n            }\r\n          });\r\n\r\n        const socketbnb = io(prefix);\r\n        socketbnb.emit(\"join\",\"USDT\");\r\n          // listen for new messages\r\n        socketbnb.on(\"orderbook\", function(data) {\r\n            setBnbPrice(Number(data.asks[0][0]));\r\n          });\r\n      }\r\n      init();\r\n  }, []) \r\n\r\n  useEffect(() => {\r\n      const setSortData =()=>{\r\n          if(tokensList?.length>0){\r\n              let newData = tokensList;\r\n              newData.sort((a, b) => {\r\n                  if(fav[a.address]) return -1;\r\n                  if(fav[b.address]) return 1;\r\n                  if(fav[a.address] && fav[b.address]) return 0;\r\n                  \r\n                  if(sortMode =='CHANGE') return Math.sign((b.priceBNBChange-a.priceBNBChange)*(1-2*order))\r\n                  return Math.sign((b.volumeUSDChange-a.volumeUSDChange)*(1-2*order))\r\n              });\r\n              setSortedData([...newData]);\r\n          }\r\n      }\r\n      setSortData();\r\n    }, [tokensList,sortMode,fav])\r\n\r\n\r\n    const setToken = (token)=>{\r\n        setSelectedToken(token);\r\n        setLong(true);\r\n        setAsk(Number(token.priceBNB));\r\n    }\r\n\r\n    const changeFav = (token)=>{\r\n        if(fav[token.address]){\r\n            removeFav(token);\r\n        }else{\r\n            addFav(token);\r\n        }\r\n    }\r\n    \r\n    const addFav=(token)=>{\r\n        let newFav=fav; \r\n        newFav[token.address]=true;\r\n        setFav({...newFav})\r\n        localStorage.setItem(favpos,JSON.stringify(newFav));\r\n    }\r\n    const removeFav=(token)=>{\r\n        let newFav=fav;\r\n        delete newFav[token.address];\r\n        setFav({...newFav})\r\n        localStorage.setItem(favpos,JSON.stringify(newFav));\r\n    }\r\n  return (\r\n          <>\r\n              <div className=\"row m-0\">\r\n                <div className=\"col-12 p-0 m-0\">\r\n                  <div className=\"form-check form-check-inline m-0 pe-2\">\r\n                    <input className=\"form-check-input\" value=\"CHANGE\" checked={sortMode === \"CHANGE\"} onChange={(e)=>{setSortMode(e.currentTarget.value)}} type=\"radio\" name=\"inlineRadioOptions\" id=\"inlineRadio1\" />\r\n                    <label className=\"form-check-label\" htmlFor={\"inlineRadio1\"}>Change</label>\r\n                  </div>\r\n                  <div className=\"form-check form-check-inline m-0\">\r\n                    <input className=\"form-check-input\" value=\"VOLUME\" checked={sortMode === \"VOLUME\"} onChange={(e)=>{setSortMode(e.currentTarget.value)}} type=\"radio\" name=\"inlineRadioOptions\" id=\"inlineRadio2\" />\r\n                    <label className=\"form-check-label\" htmlFor={\"inlineRadio2\"}>Volume</label>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <div className=\"tab-pane fade show active\" id=\"pills-bnb\" role=\"tabpanel\" aria-labelledby=\"pills-bnb-tab\">\r\n                <div className=\"table-responsive\" style={{\"height\":\"200px\",\"overflowY\":\"scroll\"}}>\r\n                  <table className=\"table text-white table-sm table-borderless\">\r\n                    <thead className=\"text-muted\" >\r\n                      <tr>\r\n                        <th scope=\"col\">Pair</th>\r\n                        <th scope=\"col\">Price</th>\r\n                        <th scope=\"col\">Change</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                    {sortedData.length==0 &&\r\n                      <tr>\r\n                        <td colSpan=\"3\">Loading...</td>\r\n                      </tr>\r\n                    }\r\n                    {sortedData.map((token,idx)=>(\r\n                        <tr role=\"button\" key={idx} onClick={(e)=>{setToken(token)}} >\r\n                          <td className=\"text-nowrap\">\r\n                            <i className={\"bi  me-1 text-warning \"+(fav[token.address]?\"bi-star-fill\":\"bi-star\")} onClick={(e)=>{e.stopPropagation();changeFav(token)}}/> \r\n                            {token.info.base}/{token.info.quote}\r\n                           </td>\r\n                          <td>{token.priceBNB}</td>\r\n                          {sortMode =='CHANGE' && \r\n                            <td className={\"text-end pe-2 \"+(token.priceBNBChange>0?\" text-success\":\"text-danger\")}>{token.priceBNBChange>0?\"+\":\"\"}{token.priceBNBChange.toFixed(2)}%</td>\r\n                          }\r\n                          {sortMode =='VOLUME' && \r\n                            <td className={\"text-end pe-2 \"+(token.volumeUSDChange>0?\" text-success\":\"text-danger\")}>{token.volumeUSDChange>0?\"+\":\"\"}{token.volumeUSDChange.toFixed(2)}%</td>\r\n                          }\r\n                        </tr>\r\n                    ))}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n          </>\r\n  );\r\n}\r\n\r\nexport default Tokens;\r\n","/root/dex/frontend/src/component/Orderbook.js",["104","105","106","107","108","109","110"],"import useSharedState from '../hook/useSharedState'\r\nimport React ,{useState,useEffect,useCallback,useMemo} from \"react\";\r\nimport io from 'socket.io-client';\r\n\r\nconst orderbookcount =9;\r\n\r\nfunction Orderbook() {\r\n  const {selectedToken,setSelectedToken,bnbPrice,long,setLong,ask,setAsk,setBid}=useSharedState();//useState(undefined);\r\n  const [orderbook,setOrderbook]=useState({});//useState(undefined);\r\n  const fixedLength=(y)=> {\r\n    let num = y;\r\n    let prec = 6;\r\n    while(num > 10) {\r\n        num /= 10;\r\n        prec--;\r\n    }\r\n    return y.toFixed(prec);\r\n  }\r\n  const getPercent = (lst,value,start,end)=>{\r\n\r\n    let max = Number(lst[0][1]);\r\n    let min = Number(lst[0][1]);\r\n    for(let i=start;i<=end;i++){\r\n      const order = lst[i];\r\n      if(max<Number(order[1])) max = Number(order[1]);\r\n      if(min>Number(order[1])) min = Number(order[1]);\r\n\r\n    }\r\n    let percent = max==min?0:(Number(value)-min)/(max-min);\r\n    percent = Math.floor(percent*4) *25;\r\n    // if(window.innerWidth > 992) {\r\n    //   percent=percent/6;\r\n    // }else{\r\n    //   percent=percent/2;\r\n    // }\r\n    //if(window.innerWidth <= 760) percent=percent/2;\r\n\r\n    return(percent)\r\n\r\n  }\r\n  const getUsdValue = (ask)=>{\r\n    let value =0;\r\n    if(selectedToken.info.quote==\"BNB\"){\r\n      value = Number(ask)*bnbPrice;\r\n    }else{\r\n      value = bnbPrice;\r\n    }\r\n    return(value);\r\n  }\r\n  useEffect(() => {\r\n      let socket=undefined;\r\n      const init=async()=>{\r\n        setOrderbook({});\r\n        const prefix = window.location.protocol+\"//\"+window.location.hostname;\r\n        const url = prefix+\"/api/getdata?op=orderbook&symbol=\"+selectedToken.symbol;\r\n        const response = await fetch(url);\r\n        const rdata = await response.json();\r\n        setOrderbook(rdata);\r\n        setAsk(Number(rdata.asks[0][0]));\r\n        setBid(Number(rdata.bids[0][0]));\r\n        \r\n        if(!socket){\r\n          socket = io(prefix);\r\n        }else{\r\n          socket.leaveAll();\r\n        }\r\n        socket.emit(\"join\",selectedToken.info.symbol);\r\n        socket.on(\"orderbook\", function(data) {\r\n            setAsk((ask)=>{\r\n              setLong(ask<=Number(data.asks[0][0]));\r\n              return Number(data.asks[0][0])\r\n            });\r\n            setBid((bid)=>Number(data.bids[0][0]));\r\n            setOrderbook(data);\r\n        });\r\n      }\r\n      if(selectedToken) init();\r\n      return () => {\r\n        if (socket) {\r\n          socket.disconnect();\r\n        }\r\n      }\r\n  }, [selectedToken]) \r\n\r\n  return (\r\n  <div className=\"order-3 order-lg-3 col-12 col-lg-2 p-1 bg-dark text-white\" style={{\"position\":\"relative\"}}>\r\n      <div className=\"d-none d-xl-block\">\r\n        <ul className=\"nav nav-pills mb-1 \" id=\"pills-tab\" role=\"tablist\">\r\n          <li className=\"nav-item\" role=\"presentation\">\r\n            <button className=\"nav-link bg-transparent\" id=\"pills-graph-tab\" data-bs-toggle=\"pill\" data-bs-target=\"#pills-graph\" type=\"button\" role=\"tab\" aria-controls=\"pills-graph\" aria-selected=\"false\">\r\n              <i className=\"bi bi-graph-up text-white\" />\r\n            </button>\r\n          </li>\r\n          <li className=\"nav-item\" role=\"presentation\">\r\n            <button className=\"nav-link bg-transparent\" id=\"pills-graph-up-tab\" data-bs-toggle=\"pill\" data-bs-target=\"#pills-graph-up\" type=\"button\" role=\"tab\" aria-controls=\"pills-graph-up\" aria-selected=\"false\">\r\n              <i className=\"bi bi-graph-up-arrow text-success\" />\r\n            </button>\r\n          </li>\r\n          <li className=\"nav-item\" role=\"presentation\">\r\n            <button className=\"nav-link bg-transparent\" id=\"pills-graph-down-tab\" data-bs-toggle=\"pill\" data-bs-target=\"#pills-graph-down\" type=\"button\" role=\"tab\" aria-controls=\"pills-graph-down\" aria-selected=\"false\">\r\n              <i className=\"bi bi-graph-down-arrow text-danger\" />\r\n            </button>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      {orderbook.bids && \r\n      <div className=\"tab-content\" id=\"pills-graph-tabContent\" style={{\"position\":\"relative\"}}>\r\n        <div style={{\"position\":\"relative\"}} className=\"tab-pane fade show active\" id=\"pills-graph\" role=\"tabpanel\" aria-labelledby=\"pills-graph-tab\">\r\n          <div className=\"row\">\r\n          <div className=\"xl-6 col-6 col-lg-12\" style={{\"position\":\"relative\"}}>\r\n            <div className=\"table-responsive\" style={{\"position\":\"relative\"}}>\r\n              <table style={{\"position\":\"relative\"}} className=\"table text-white table-sm table-borderless\">\r\n                <thead className=\"text-muted\">\r\n                  <tr>\r\n                    <th scope=\"col\">Price</th>\r\n                    <th scope=\"col\">Amount</th>\r\n                    <th scope=\"col\">Total</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody style={{\"position\":\"relative\"}}>\r\n                  { \r\n                    (function (rows, i, len) {\r\n                      if(orderbook.asks){\r\n                        while (i < len) {\r\n                          rows.push(\r\n                            <tr key={i}  className=\"relativetr\">\r\n                              <td className=\"text-danger\">{fixedLength(Number(orderbook.asks[len-i-1][0]))}</td>\r\n                              <td>{fixedLength(Number(orderbook.asks[len-i-1][1]))}</td>\r\n                              <td>{fixedLength(Number(orderbook.asks[len-i-1][1])*Number(orderbook.asks[len-i-1][0]))}</td>\r\n                              <td className=\"tr-shadow\" style={{\"background\": \"rgba(234, 0, 112, 0.15)\", \"width\": getPercent(orderbook.asks,orderbook.asks[len-i-1][1],0,orderbookcount-1)+\"%\"}}></td>\r\n                            </tr>\r\n                          );\r\n                          i++;\r\n                        }\r\n                      }\r\n                      return rows;\r\n                    })([], 0, orderbookcount)\r\n                  }\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-6 col-lg-12 d-none d-xl-block\">\r\n            <div className=\"table-responsive\">\r\n              <table className=\"table text-white table-sm table-borderless\">\r\n                <tbody>\r\n                  <tr>\r\n                    <td className={\"h6 \"+(long?\"text-success\":\"text-danger\")}>\r\n                      {orderbook.asks ? fixedLength(Number(orderbook.asks[0][0])):\"\"}\r\n                      <i className={\"bi bi-arrow-\"+(long?\"up\":\"down\")} />\r\n                    </td>\r\n                    <td className=\"h6 text-warning\">\r\n                      ${orderbook.bids ? fixedLength(getUsdValue(orderbook.bids[0][0])):0}\r\n                    </td>\r\n                  </tr>\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n          <div className=\"xl-6 col-6 col-lg-12\" style={{\"position\":\"relative\"}}>\r\n\r\n            <div className=\"table-responsive\" style={{\"position\":\"relative\"}}>\r\n              <table className=\"table text-white table-sm table-borderless\" style={{\"position\":\"relative\"}}>\r\n                <thead className=\"text-muted\">\r\n                  <tr>\r\n                    <th scope=\"col\">Price</th>\r\n                    <th scope=\"col\">Amount</th>\r\n                    <th scope=\"col\">Total</th>\r\n                  </tr>\r\n                </thead>\r\n                <tbody style={{\"position\":\"relative\"}}>\r\n                  { \r\n                    (function (rows, i, len) {\r\n                      if(orderbook.bids){\r\n                        while (i < len) {\r\n                          rows.push(\r\n                            <tr key={i} style={{\"position\": \"relative\"}}>\r\n                              <td className=\"text-success\">{fixedLength(Number(orderbook.bids[i][0]))}</td>\r\n                              <td>{fixedLength(Number(orderbook.bids[i][1]))}</td>\r\n                              <td>{fixedLength(Number(orderbook.bids[i][1])*Number(orderbook.bids[i][0]))}</td>\r\n                              <td className=\"tr-shadow\" style={{\"background\": \"rgba(0, 192, 135, 0.15)\", \"width\": getPercent(orderbook.bids,orderbook.bids[i][1],0,orderbookcount-1)+\"%\"}}></td>\r\n                            </tr>\r\n                          );\r\n                          i++;\r\n                        }\r\n                      }\r\n                      return rows;\r\n                    })([], 0, orderbookcount)\r\n                  }\r\n                </tbody>\r\n              </table>\r\n            </div>\r\n          </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"tab-pane fade\" id=\"pills-graph-down\" role=\"tabpanel\" aria-labelledby=\"pills-graph-down-tab\">\r\n          <div className=\"table-responsive\">\r\n            <table className=\"table text-white table-sm table-borderless\">\r\n              <thead className=\"text-muted\">\r\n                <tr>\r\n                  <th scope=\"col\">Price</th>\r\n                  <th scope=\"col\">Amount</th>\r\n                  <th scope=\"col\">Total</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                { \r\n                  (function (rows) {\r\n                    if(orderbook.asks){\r\n                      const len = orderbook.asks.length;\r\n                      let i=0;\r\n                      while (i < len) {\r\n                        rows.push(\r\n                          <tr key={i}  style={{\"position\": \"relative\"}}>\r\n                            <td className=\"text-danger\">{fixedLength(Number(orderbook.asks[len-i-1][0]))}</td>\r\n                            <td>{fixedLength(Number(orderbook.asks[len-i-1][1]))}</td>\r\n                            <td>{fixedLength(Number(orderbook.asks[len-i-1][1])*Number(orderbook.asks[len-i-1][0]))}</td>\r\n                            <td className=\"tr-shadow\" style={{\"background\": \"rgba(234, 0, 112, 0.15)\", \"width\": getPercent(orderbook.asks,orderbook.asks[len-i-1][1],0,orderbook.asks.length-1)+\"%\"}}></td>\r\n                          </tr>\r\n                        );\r\n                        i++;\r\n                      }\r\n                    }\r\n                    return rows;\r\n                  })([])\r\n                }\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div className=\"tab-pane fade\" id=\"pills-graph-up\" role=\"tabpanel\" aria-labelledby=\"pills-graph-up-tab\">\r\n          <div className=\"table-responsive\">\r\n            <table className=\"table text-white table-sm table-borderless\">\r\n              <thead className=\"text-muted\">\r\n                <tr>\r\n                  <th scope=\"col\">Price</th>\r\n                  <th scope=\"col\">Amount</th>\r\n                  <th scope=\"col\">Total</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                { \r\n                  (function (rows, i, len) {\r\n                    if(orderbook.bids){\r\n                      const len =  orderbook.bids.length;\r\n                      let i=0;\r\n\r\n                      while (i < len) {\r\n                        rows.push(\r\n                          <tr key={i}  style={{\"position\": \"relative\"}}>\r\n                            <td className=\"text-success\">{fixedLength(Number(orderbook.bids[i][0]))}</td>\r\n                            <td>{fixedLength(Number(orderbook.bids[i][1]))}</td>\r\n                            <td>{fixedLength(Number(orderbook.bids[i][1])*Number(orderbook.bids[i][0]))}</td>\r\n                            <td className=\"tr-shadow\" style={{\"background\": \"rgba(0, 192, 135, 0.15)\", \"width\": getPercent(orderbook.bids,orderbook.bids[i][1],0,orderbook.asks.length-1)+\"%\"}}></td>\r\n\r\n                          </tr>\r\n                        );\r\n                        i++;\r\n                      }\r\n                    }\r\n                    return rows;\r\n                  })([], 0, 6)\r\n                }\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Orderbook;\r\n","/root/dex/frontend/src/component/Top.js",["111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141"],"/root/dex/frontend/src/component/Chart.js",["142","143","144","145","146","147","148","149"],"/root/dex/frontend/src/component/Orderhistory.js",["150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180"],"import useSharedState from '../hook/useSharedState'\r\nimport React ,{useState,useEffect,useCallback,useMemo,useRef} from \"react\";\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport {fixedLength,adjustDate} from \"./common\"\r\nimport {ERC20_ABI} from \"../abi/ERC20\";\r\nimport { WETH,limitOrder} from \"./const\";\r\nimport {getContract} from \"./contract\";\r\nimport {LIMIT_ABI} from \"../abi/LIMIT\";\r\n\r\nfunction Orderhistory() {\r\n\r\n  const {selectedToken,setSelectedToken,bnbPrice,tokensList}=useSharedState();//useState(undefined);\r\n  const { chainId, account, activate, active,library } = useWeb3React();\r\n  const [openOrders,setOpenOrders] = useState([]);\r\n  const [tradeHistories,setTradeHistories] = useState([]);\r\n  const [balances,setBalances] = useState([]);\r\n  const [totalBnbBalance,setTotalBnbBalance] =useState(0);\r\n  const [timespanOrder,setTimespanOrder]=useState(3600*24*30);\r\n  const [timespanTrade,setTimespanTrade]=useState(3600*24*30);\r\n  const [busellFilter,setBuysellFilter]=useState(0);\r\n  const [hideOthersOpen,setHideOthersOpen]=useState(false);\r\n  const [hideOthersOrder,setHideOthersOrder]=useState(false);\r\n  const [hideOthersTrade,setHideOthersTrade]=useState(false);\r\n  \r\n  const [longShort,setLongShort] = useState(0);  \r\n  const selectedTokenRef = useRef();\r\n  const accountRef = useRef();\r\n  const intervalRef = useRef();\r\n\r\n  const prefix = window.location.protocol+\"//\"+window.location.hostname;\r\n  const limitTx = (tx)=>{\r\n    return tx?(tx.substring(0,5)+\"...\"+tx.substring(tx.length-6,tx.length)):\"\";\r\n  }\r\n  const updateOpenOrder = async()=>{\r\n    const url = prefix+\"/api/getorder?chainid=56&owner=\"+account+\"&openclose=open\";\r\n    const response = await fetch(url);\r\n    const rt = await response.json();\r\n    console.log(rt);\r\n    setOpenOrders(rt)\r\n  }\r\n  const updateTradeHistories = async()=>{\r\n    const url = prefix+\"/api/getorder?chainid=56&owner=\"+account+\"&openclose=trade&timestamp=\"+(Date.now()-timespanTrade*1000);\r\n    const response = await fetch(url);\r\n    const rt = await response.json();\r\n    setTradeHistories(rt)\r\n    console.log(rt);\r\n  }\r\n  const getInAmount = (symbol)=>{\r\n    let am = 0;\r\n    openOrders.map((order)=>{\r\n      if(order.inAsset==symbol) am=am+order.inAmount;\r\n    })\r\n    return am;\r\n  }\r\n  const updateBalances = async()=>{\r\n    let bl = [];\r\n    let subBnb = 0;\r\n    if(!active || chainId!=56) return;\r\n//    console.log({account,active})\r\n    let ethBalance = Number(await library.getBalance(account));\r\n    ethBalance = Number(ethBalance / Math.pow(10,WETH.decimals));\r\n    let inAmount = getInAmount('BNB');\r\n    let total = inAmount+ethBalance;\r\n    subBnb = subBnb+total;\r\n    bl.push({asset:'BNB',amount:ethBalance,inamount:inAmount,total:total,bnbvalue:total});\r\n    await Promise.all(tokensList.map(async(token)=>{\r\n      const contract = getContract(token.address, ERC20_ABI,library,account);\r\n      let tokenBalance = Number(await contract.balanceOf(account));\r\n      tokenBalance=tokenBalance / Math.pow(10,selectedToken.info.decimals);\r\n      inAmount = getInAmount(token.symbol);\r\n      total = tokenBalance+inAmount;\r\n      const bnbvalue = token.info.quote==\"BNB\"? (Number(token.priceBNB)*total):(total/Number(token.priceBNB));\r\n      bl.push({asset:token.symbol,amount:tokenBalance,inamount:inAmount,total:total,bnbvalue:bnbvalue});\r\n      subBnb = subBnb+bnbvalue;\r\n\r\n    }))\r\n    setTotalBnbBalance(subBnb);\r\n    setBalances(JSON.parse(JSON.stringify(bl)));\r\n  }\r\n  const updateAll = async()=>{\r\n    if(account){\r\n      updateOpenOrder();\r\n      updateTradeHistories();\r\n      updateBalances();    \r\n    }\r\n  }\r\n  const orderCancel = async(orderId)=>{\r\n    const limitContract = getContract(limitOrder, LIMIT_ABI,library,account);\r\n    await limitContract.cancelOrder(orderId);\r\n  }\r\n  useEffect(() => {\r\n    if(selectedToken && account){\r\n        selectedTokenRef.current = selectedToken;\r\n        accountRef.current = account;\r\n        if(intervalRef.current){\r\n            clearInterval(intervalRef.current);\r\n        }\r\n        updateAll();\r\n        intervalRef.current = setInterval(() => updateAll(), 10000);\r\n    }\r\n    return () => {\r\n        if(intervalRef.current){\r\n            clearInterval(intervalRef.current);\r\n        }\r\n    }\r\n  }, [selectedToken,account,active,longShort])\r\n\r\n  return (\r\n  <div className=\"d-none d-lg-block col-12 col-lg-8 orders-widget\">\r\n    <div>\r\n      <ul className=\"nav nav-pills mb-1\" id=\"pills-tab\" role=\"tablist\">\r\n        <li className=\"nav-item\" role=\"presentation\">\r\n          <button className=\"nav-link bg-transparent active\" id=\"pills-home-tab\" data-bs-toggle=\"pill\" data-bs-target=\"#pills-home\" type=\"button\" role=\"tab\" aria-controls=\"pills-home\" aria-selected=\"true\">Open Orders</button>\r\n        </li>\r\n        <li className=\"nav-item\" role=\"presentation\">\r\n          <button className=\"nav-link bg-transparent\" id=\"pills-contact-tab\" data-bs-toggle=\"pill\" data-bs-target=\"#pills-contact\" type=\"button\" role=\"tab\" aria-controls=\"pills-contact\" aria-selected=\"false\">Trade History</button>\r\n        </li>\r\n        <li className=\"nav-item\" role=\"presentation\">\r\n          <button className=\"nav-link bg-transparent\" id=\"pills-balances-tab\" data-bs-toggle=\"pill\" data-bs-target=\"#pills-balances\" type=\"button\" role=\"tab\" aria-controls=\"pills-balances\" aria-selected=\"false\">Balances</button>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n    <div className=\"tab-content\" id=\"pills-tabContent\">\r\n      <div className=\"tab-pane fade show active\" id=\"pills-home\" role=\"tabpanel\" aria-labelledby=\"pills-home-tab\">\r\n        <div className=\"orders-widget__subtoolbar p-1 d-flex justify-content-between align-items-center\">\r\n          <div className=\"form-check\">\r\n            <input className=\"form-check-input custom-checkbox\" type=\"checkbox\" defaultValue id=\"flexCheckDefault\"\r\n            checked={hideOthersOpen} onClick={()=>setHideOthersOpen(!hideOthersOpen)}/>\r\n            <label className=\"form-check-label\" htmlFor={\"flexCheckDefault\"}>\r\n              Hide Other Pairs\r\n            </label>\r\n          </div>\r\n        </div>\r\n        <div className=\"table-responsive\">\r\n          <table className=\"table text-white table-sm table-borderless\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">TxHash</th>\r\n                <th scope=\"col\">Date</th>\r\n                <th scope=\"col\">Pair</th>\r\n                <th scope=\"col\">Side</th>\r\n                <th scope=\"col\">Price</th>\r\n                <th scope=\"col\">Amount</th>\r\n                <th scope=\"col\">Action</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n            {openOrders.map((order,idx)=>{\r\n              if (!hideOthersOpen || order.pairs.indexOf(selectedToken?.symbol)>=0){\r\n                return( \r\n                  <tr key={idx}>\r\n                    <td>{limitTx(order.transactionid)}</td>\r\n                    <td>{adjustDate(order.timestamp)}</td>\r\n                    <td>{order.pairs}</td>\r\n                    <td>{order.side}</td>\r\n                    <td>{order.price}</td>\r\n                    <td>{order.amount}</td>\r\n                    <td role=\"button\" className=\"text-danger\" onClick={()=>orderCancel(order.orderid)}>Cancel</td>\r\n                  </tr>\r\n                 )\r\n              }\r\n            })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n      <div className=\"tab-pane fade\" id=\"pills-contact\" role=\"tabpanel\" aria-labelledby=\"pills-contact-tab\">\r\n        <div className=\"orders-widget__subtoolbar p-1 row\">\r\n          <div className=\"col-2\">\r\n            <div className=\"form-check\">\r\n              <input className=\"form-check-input custom-checkbox\" type=\"checkbox\" defaultValue id=\"flexCheckDefault\" \r\n              checked={hideOthersTrade} onClick={()=>setHideOthersTrade(!hideOthersTrade)}/>\r\n              <label className=\"form-check-label\" htmlFor={\"flexCheckDefault\"}>\r\n                Hide Other Pairs\r\n              </label>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-10 d-flex align-items-center justify-content-end\">\r\n            <div className=\"me-1\">\r\n            {/*\r\n              <label >Pair: </label>\r\n              <input type=\"text\" className=\"bg-secondary text-white border-0\" style={{width: '50px'}} placeholder=\"Coin\" />\r\n              <label >/</label>\r\n              <div className=\"btn-group me-2\">\r\n                <button className=\"btn btn-secondary btn-sm dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton1\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                  BNB\r\n                </button>\r\n                <ul className=\"dropdown-menu dropdown-menu-dark dropdown-menu-end\" aria-labelledby=\"dropdownMenuButton1\">\r\n                  <li><a className=\"dropdown-item\" href=\"#\">BNB</a></li>\r\n                  <li><a className=\"dropdown-item\" href=\"#\">BUSD</a></li>\r\n                  <li><a className=\"dropdown-item\" href=\"#\">BTCB</a></li>\r\n                  <li><a className=\"dropdown-item\" href=\"#\">ETH</a></li>\r\n                  <li><a className=\"dropdown-item\" href=\"#\">IDRTB</a></li>\r\n                  <li><a className=\"dropdown-item\" href=\"#\">TAUDB</a></li>\r\n                  <li><a className=\"dropdown-item\" href=\"#\">THKDB</a></li>\r\n                  <li><a className=\"dropdown-item\" href=\"#\">TUSDB</a></li>\r\n                  <li><a className=\"dropdown-item\" href=\"#\">USDSB</a></li>\r\n                  <li><a className=\"dropdown-item\" href=\"#\">USDT</a></li>\r\n                  <li><a className=\"dropdown-item\" href=\"#\">DAI</a></li>\r\n                </ul>\r\n              </div>*/\r\n            }\r\n            </div>\r\n            <div className=\"me-2\">\r\n              <label >Type: </label>\r\n              <div className=\"btn-group\">\r\n                <button className=\"btn btn-secondary btn-sm dropdown-toggle\" type=\"button\" id=\"dropdownMenuButton1\" data-bs-toggle=\"dropdown\" aria-expanded=\"false\">\r\n                  {(longShort==0 || longShort==1 )&& \r\n                    <span className=\"text-success\">Buy </span> \r\n                  }\r\n                  {(longShort==0 || longShort==2 )&& \r\n                    <span className=\"text-danger\">Sell</span>\r\n                  }\r\n\r\n                </button>\r\n                <ul className=\"dropdown-menu dropdown-menu-dark\" aria-labelledby=\"dropdownMenuButton1\">\r\n                  <li>\r\n                    <a className=\"dropdown-item\" role=\"button\" onClick={()=>setLongShort(0)}>\r\n                      <span className=\"text-success\">Buy </span>\r\n                      <span className=\"text-danger\">Sell</span>\r\n                    </a>\r\n                  </li>\r\n                  <li>\r\n                    <a className=\"dropdown-item\" role=\"button\" onClick={()=>setLongShort(1)}>\r\n                      <span className=\"text-success\">Buy </span>\r\n                    </a>\r\n                  </li>\r\n                  <li>\r\n                    <a className=\"dropdown-item\" role=\"button\" onClick={()=>setLongShort(2)}>\r\n                      <span className=\"text-danger\">Sell</span>\r\n                    </a>\r\n                  </li>\r\n                </ul>\r\n              </div>\r\n            </div>\r\n            <div className=\"btn-group btn-group-sm\" role=\"group\" aria-label=\"Basic example\">\r\n              <button type=\"button\" className=\"btn btn-secondary me-1\" onClick={()=>timespanTrade(24*3600)}>1 Day</button>\r\n              <button type=\"button\" className=\"btn btn-secondary me-1\" onClick={()=>timespanTrade(24*3600*7)}>1 Week</button>\r\n              <button type=\"button\" className=\"btn btn-secondary me-1\"  onClick={()=>timespanTrade(24*3600*30)}>1 Month</button>\r\n              <button type=\"button\" className=\"btn btn-secondary me-1\"  onClick={()=>timespanTrade(24*3600*93)}>3 Months</button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"table-responsive\">\r\n          <table className=\"table text-white table-sm table-borderless\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">Tx</th>\r\n                <th scope=\"col\">Date</th>\r\n                <th scope=\"col\">Pair</th>\r\n                <th scope=\"col\">Side</th>\r\n                <th scope=\"col\">Price</th>\r\n                <th scope=\"col\">Filled</th>\r\n                <th scope=\"col\">Total</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {tradeHistories.map((order,idx)=>{\r\n                  if (!hideOthersTrade || order.pairs.indexOf(selectedToken?.symbol)>=0){\r\n                    if(longShort==0 ||\r\n                      (longShort==1 && order.side=='buy') ||\r\n                      (longShort==2 && order.side=='sell')\r\n                      ){\r\n                    return (\r\n                      <tr key={idx}>\r\n                        <td>{limitTx(order.transactionid)}</td>\r\n                        <td>{adjustDate(order.timestamp)}</td>\r\n                        <td>{order.pairs}</td>\r\n                        <td>{order.side}</td>\r\n                        <td>{order.price}</td>\r\n                        <td>{order.amount}</td>\r\n                        <td >{fixedLength(order.price*order.amount)}</td>\r\n                      </tr>\r\n                     )\r\n                    }\r\n                  }\r\n              })}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n      <div className=\"tab-pane fade\" id=\"pills-balances\" role=\"tabpanel\" aria-labelledby=\"pills-balances-tab\">\r\n        <div className=\"orders-widget__subtoolbar p-1 d-flex justify-content-end align-items-center\">\r\n          <div className=\"text-1\">\r\n        Estimated Value: {fixedLength(totalBnbBalance)}BNB / ${fixedLength(totalBnbBalance*bnbPrice)}</div>\r\n        </div>\r\n        <div className=\"table-responsive\">\r\n          <table className=\"table text-white table-sm table-borderless\">\r\n            <thead>\r\n              <tr>\r\n                <th scope=\"col\">Asset</th>\r\n                <th scope=\"col\">Total Balance</th>\r\n                <th scope=\"col\">Available Balance</th>\r\n                <th scope=\"col\">In Order</th>\r\n                <th scope=\"col\">BNB Value</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {balances.map((balance,idx)=>\r\n                {\r\n                  if(Number(balance.bnbvalue)>0){\r\n                    return(\r\n                      <tr key={idx}>\r\n                        <td>{balance.asset}</td>\r\n                        <td>{balance.total}</td>\r\n                        <td>{balance.amount}</td>\r\n                        <td>{balance.inamount}</td>\r\n                        <td>{balance.bnbvalue}</td>\r\n                      </tr>\r\n                    )\r\n                  }\r\n                }\r\n              )}\r\n\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  );\r\n}\r\n\r\nexport default Orderhistory;\r\n","/root/dex/frontend/src/component/Transaction.js",["181","182","183","184","185","186"],"import useSharedState from '../hook/useSharedState'\r\nimport React ,{useState,useEffect,useCallback,useMemo} from \"react\";\r\nimport io from 'socket.io-client';\r\n\r\n\r\nfunction Tradehistory() {\r\n\r\n  const {selectedToken,setSelectedToken}=useSharedState();//useState(undefined);\r\n  const [transactions,setTransactions]=React.useState([]);//useState(undefined);\r\n  const [showtr,setShowTr]=useState(true);//useState(undefined);\r\n  \r\n  useEffect(() => {\r\n      let socket=undefined;\r\n      const init=async()=>{\r\n        const prefix = window.location.protocol+\"//\"+window.location.hostname;\r\n        const url = prefix+\"/api/getdata?op=transactions&symbol=\"+selectedToken.symbol;\r\n        const response = await fetch(url);\r\n        const rdata = await response.json();\r\n        setTransactions(rdata);\r\n        if(!socket){\r\n          socket = io(prefix);\r\n        }else{\r\n          socket.leaveAll();\r\n        }\r\n        socket.emit(\"join\",selectedToken.info.symbol);\r\n        socket.on(\"transactions\", function(data) {\r\n            setTransactions(data);\r\n        });\r\n      }\r\n      if(selectedToken) init();\r\n      return () => {\r\n        if (socket) {\r\n          socket.disconnect();\r\n        }\r\n      }\r\n  }, [selectedToken]) \r\n  const changeShow=(e)=>{\r\n    setShowTr(!showtr);    \r\n  }\r\n  return (\r\n      <>\r\n                <div className=\"d-flex justify-content-between align-items-center mt-2 mb-2\" role=\"button\" \r\n                  onClick={changeShow}>\r\n                  <span className=\"text-warning text-1\">Trading History</span>\r\n                  <i className=\"bi bi-chevron-down\" />\r\n                </div>\r\n                { showtr &&\r\n                  <div className=\"table-responsive\">\r\n                    <table className=\"table text-white table-sm table-borderless\">\r\n                      <thead className=\"text-muted\">\r\n                        <tr>\r\n                          <th scope=\"col\">Price</th>\r\n                          <th scope=\"col\">Amount</th>\r\n                          <th scope=\"col\">Time</th>\r\n                        </tr>\r\n                      </thead>\r\n                      <tbody>\r\n                        {!transactions || transactions.length==0 &&\r\n                          <tr>\r\n                            <td colSpan=\"3\">Loading...</td>\r\n                          </tr>\r\n                        }\r\n\r\n                        {transactions?.map((transaction,idx)=>(\r\n                          <tr key={idx}>\r\n                            <td className={transaction.isbuy?\"text-success\":\"text-danger\"}>{transaction.price}</td>\r\n                            <td>{transaction.amount}</td>\r\n                            <td>{(new Date(transaction.time)).toLocaleTimeString()}</td>\r\n                          </tr>\r\n                         ))}\r\n                      </tbody>\r\n                    </table>\r\n                  </div>                }\r\n\r\n      </>\r\n  );\r\n}\r\n\r\nexport default Tradehistory;\r\n","/root/dex/frontend/src/component/Trading.js",["187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283"],"import { Modal } from \"react-bootstrap\";\r\nimport useSharedState from '../hook/useSharedState'\r\n\r\nimport React ,{useState,useEffect,useCallback,useMemo} from \"react\";\r\nimport { useWeb3React } from '@web3-react/core'\r\nimport { Web3Provider } from '@ethersproject/providers'\r\nimport { InjectedConnector } from '@web3-react/injected-connector'\r\n\r\nimport { BigNumber } from '@ethersproject/bignumber'\r\n\r\nimport { WalletConnectConnector } from \"@web3-react/walletconnect-connector\";\r\nimport { WETH,marketOrder,limitOrder,STAKEFEE,EXECUTOR_FEE,SLIPPAGE } from \"./const\";\r\nimport {ERC20_ABI} from \"../abi/ERC20\";\r\nimport {LIMIT_ABI} from \"../abi/LIMIT\";\r\nimport {MARKET_ABI} from \"../abi/MARKET\";\r\nimport {PAN_ABI} from \"../abi/PAN\";\r\n\r\nimport {getContract} from \"./contract\";\r\nimport {fixedLength} from \"./common\"\r\n\r\nconst workChainId = 56\r\n\r\nfunction Trading() {\r\n\r\n  const { chainId, account, activate, active,library } = useWeb3React()\r\n  const [show, setShow] = useState(false);\r\n  const [showMore, setShowMore] = useState(false);\r\n  const [slippagePractice,setSlippagePractice] = useState(SLIPPAGE);\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => {\r\n    if(active==false){\r\n      setShow(true);\r\n    }\r\n  }\r\n  const connectMetamask = async()=>{\r\n    const injectedConnector = new InjectedConnector({supportedChainIds: [1,3,4,42,56,137],})\r\n    activate(injectedConnector)\r\n    handleClose();\r\n  }\r\n\r\n  \r\n  const RPC = {\r\n    56: 'https://bsc.getblock.io/mainnet/?api_key=7b87bee9-86e3-49d9-bd31-aa4bd5efed68'\r\n  }\r\n  \r\n  const connectWalletConnect = async()=>{\r\n    handleClose();\r\n    const WalletConnect = new WalletConnectConnector({\r\n     rpc: RPC,\r\n     qrcode: true,\r\n    });\r\n    await activate(WalletConnect);\r\n    setTimeout(()=>{activate(WalletConnect)},500)\r\n\r\n  }  \r\n  const toFixed = (_x)=> {\r\n    let x=Math.floor(_x)\r\n    if (Math.abs(x) < 1.0) {\r\n      var e = parseInt(x.toString().split('e-')[1]);\r\n      if (e) {\r\n          x *= Math.pow(10,e-1);\r\n          x = '0.' + (new Array(e)).join('0') + x.toString().substring(2);\r\n      }\r\n    } else {\r\n      var e = parseInt(x.toString().split('+')[1]);\r\n      if (e > 20) {\r\n          e -= 20;\r\n          x /= Math.pow(10,e);\r\n          x += (new Array(e+1)).join('0');\r\n      }\r\n    }\r\n    return x.toString();\r\n  }\r\n\r\n\r\n  const [orderType,setOrderType]=useState('market');\r\n  const {selectedToken,setSelectedToken,bnbPrice,long,setLong,ask,bid}=useSharedState();//useState(undefined);\r\n  const [priceBuy,setPriceBuy] = useState(0);\r\n  const [priceSell,setPriceSell] = useState(0);\r\n  const [amountBuy,setAmountBuy] = useState(0);\r\n  const [amountSell,setAmountSell] = useState(0);\r\n  const [totalSell,setTotalSell] = useState(0);\r\n  const [totalBuy,setTotalBuy] = useState(0);\r\n  const [timestamp,setTimestamp] = useState(0);\r\n  const [balances,setBalances] = useState({base:0,quote:0})\r\n  const [exactIn,setExactIn] = useState(false);\r\n  const [disabled,setDisabled] = useState(false);\r\n  const limitContract = getContract(limitOrder, LIMIT_ABI,library,account);\r\n  const marketContract = getContract(marketOrder, MARKET_ABI,library,account);\r\n  //const marketContract = getContract(\"0x10ED43C718714eb63d5aA57B78B54704E256024E\", PAN_ABI,library,account);\r\n  const resetAll = ()=>{\r\n      setAmountBuy(0);\r\n      setAmountSell(0);\r\n      setTotalBuy(0);\r\n      setTotalSell(0);\r\n\r\n  }\r\n  const setAmountBuyCall = (value)=>{\r\n    setAmountBuy(value);\r\n    setExactIn(false);\r\n  }\r\n\r\n  const setPercentBuy = (value)=>{\r\n    if(!selectedToken) return;\r\n    setExactIn(true);\r\n    if((orderType=='limit') || \r\n        orderType=='market'\r\n      ){\r\n        const total =balances.quote*value/(1+STAKEFEE+Number(slippagePractice)/100); \r\n        setTotalBuy(Number(fixedLength(selectedToken.info.quote!=\"BNB\"?total:total-EXECUTOR_FEE)));\r\n    }\r\n  }\r\n  const setPercentSell = (value)=>{\r\n    if(!selectedToken) return;\r\n    const total =balances.base*value/(1+STAKEFEE+Number(slippagePractice)/100); \r\n    setAmountSell(Number(fixedLength(selectedToken.info.base!=\"BNB\"?total:total-EXECUTOR_FEE)));\r\n  }\r\n\r\n  const convertAmount = (value,decimals)=>{\r\n    return value/Math.pow(10,decimals);\r\n  }\r\n  const updateMarketData = async()=>{\r\n    //buy\r\n    console.log('update market data');\r\n    let assetIn = selectedToken.info.quote==\"BNB\"?WETH.address:selectedToken.address;\r\n    let assetOut = selectedToken.info.base==\"BNB\"?WETH.address:selectedToken.address;\r\n    let decimalsIn = selectedToken.info.quote==\"BNB\"?WETH.decimals:selectedToken.info.decimals;\r\n    let decimalsOut = selectedToken.info.base==\"BNB\"?WETH.decimals:selectedToken.info.decimals;\r\n    let path = [assetIn,assetOut];\r\n    if(exactIn){\r\n      if(totalBuy>0) {\r\n        const amountIn = getBigNumber((assetIn==WETH.address?Math.pow(10,WETH.decimals):Math.pow(10,selectedToken.info.decimals))*totalBuy);\r\n        const _amountOut = await marketContract.getAmountsOut(amountIn, path);\r\n        const amountOut = _amountOut[_amountOut.length-1];\r\n        setAmountBuy(Number(fixedLength(convertAmount(Number(amountOut),decimalsOut))));\r\n      }\r\n    }else{\r\n      if(amountBuy>0) {\r\n        const amountOut = getBigNumber((assetOut==WETH.address?Math.pow(10,WETH.decimals):Math.pow(10,selectedToken.info.decimals))*amountBuy);\r\n        const _amountIn = await marketContract.getAmountsIn(amountOut, path);\r\n        const amountIn = _amountIn[0];\r\n        setTotalBuy(Number(fixedLength(convertAmount(Number(amountIn),decimalsIn))));    \r\n      }\r\n    }\r\n    //sell\r\n\r\n    assetIn = selectedToken.info.base==\"BNB\"?WETH.address:selectedToken.address;;\r\n    assetOut = selectedToken.info.quote==\"BNB\"?WETH.address:selectedToken.address;;\r\n    path = [assetIn,assetOut];\r\n    decimalsIn = selectedToken.info.base==\"BNB\"?WETH.decimals:selectedToken.info.decimals;\r\n    decimalsOut = selectedToken.info.quote==\"BNB\"?WETH.decimals:selectedToken.info.decimals;\r\n\r\n    if(amountSell==0) return;\r\n    const amountIn = getBigNumber((assetIn==WETH.address?Math.pow(10,WETH.decimals):Math.pow(10,selectedToken.info.decimals))*amountSell);\r\n    const _amountOut = await marketContract.getAmountsOut(amountIn,path);\r\n    const amountOut = _amountOut[_amountOut.length-1];\r\n    setTotalSell(Number(fixedLength(convertAmount(Number(amountOut),decimalsOut))));\r\n  }\r\n\r\n  useEffect(()=>{\r\n    const update = async()=>{\r\n      if(orderType=='limit'){\r\n        if(Number(priceBuy)>0){\r\n          if(exactIn){\r\n            const buy =Number(fixedLength(Number(totalBuy)/Number(priceBuy))); \r\n            setAmountBuy(buy);\r\n          }else{\r\n            const total =Number(fixedLength(Number(amountBuy)*Number(priceBuy))); \r\n            setTotalBuy(total);\r\n          }\r\n        }\r\n      }else{\r\n        updateMarketData();\r\n      }\r\n    }\r\n    if(selectedToken && account) update();\r\n  },[selectedToken,account,priceBuy,amountBuy,totalBuy,orderType])\r\n\r\n  useEffect(()=>{\r\n    const update = async()=>{\r\n      if(orderType=='limit'){\r\n        if(Number(priceSell)>0){\r\n          const total =Number(fixedLength(Number(amountSell)*Number(priceSell))); \r\n          setTotalSell(total);\r\n        }\r\n      }else{\r\n        updateMarketData();\r\n      }\r\n    }\r\n    if(selectedToken && account) update();\r\n  },[selectedToken,account,priceSell,amountSell,orderType])\r\n\r\n  const updateBalance = async()=>{\r\n\r\n      const contract = getContract(selectedToken.address, ERC20_ABI,library,account);\r\n      let ethBalance = Number(await library.getBalance(account));\r\n      let tokenBalance = Number(await contract.balanceOf(account));\r\n      ethBalance = Number(fixedLength(ethBalance / Math.pow(10,WETH.decimals)));\r\n      tokenBalance=Number(fixedLength(tokenBalance / Math.pow(10,selectedToken.info.decimals)));\r\n      let data = {... balances};\r\n      data.base = selectedToken.info.base ==\"BNB\"?ethBalance:tokenBalance;\r\n      data.quote = selectedToken.info.quote ==\"BNB\"?ethBalance:tokenBalance;\r\n      setBalances(data);\r\n  }\r\n  useEffect(()=>{\r\n    const update = async()=>{\r\n      if(active && chainId==56){\r\n        updateBalance();\r\n        if(orderType=='market') updateMarketData();\r\n      }\r\n      setAmountBuy(0);\r\n      setAmountSell(0);\r\n      setTotalBuy(0);\r\n      setTotalSell(0);\r\n\r\n    }\r\n    if(selectedToken && account) update();\r\n  },[selectedToken,account,timestamp,active]);\r\n\r\n  useEffect(() => {\r\n    library?.on('block', () => {\r\n      if(chainId==56){\r\n        updateBalance();\r\n      }\r\n    })\r\n    return () => {\r\n      library?.removeAllListeners('block')\r\n    }\r\n  }, [library,chainId])\r\n\r\n  const getBigNumber=(value)=>{\r\n    return(BigNumber.from(toFixed(value)));\r\n  }\r\n  const getDeadLine = async()=>{\r\n    let timestamp =0;\r\n    if(library){\r\n      const bn = await library.getBlockNumber();\r\n      timestamp = (await library.getBlock(bn)).timestamp+3600*3;\r\n    }\r\n    return timestamp;\r\n  }\r\n  const sendMarketOrder=async(assetIn,assetOut,amountIn,amountOut)=>{\r\n    setDisabled(true);\r\n    console.log({assetIn,assetOut,amountIn,amountOut})\r\n\r\n    try{\r\n      let deadline =await getDeadLine();\r\n      const path = [assetIn,assetOut];\r\n      let options = {\r\n            gasLimit : 0,\r\n            value:getBigNumber(\r\n              (WETH.address==assetIn?(amountIn*(1+STAKEFEE)):0)\r\n              *Math.pow(10,WETH.decimals)\r\n              )\r\n      };        \r\n      const ai = getBigNumber((assetIn==WETH.address?Math.pow(10,WETH.decimals):Math.pow(10,selectedToken.info.decimals))*amountIn)\r\n      const ao = getBigNumber((amountOut==WETH.address?Math.pow(10,WETH.decimals):Math.pow(10,selectedToken.info.decimals))*(amountOut*(1-Number(slippagePractice)/100)));\r\n      if(WETH.address!=assetIn){\r\n        const allowai = getBigNumber(assetIn==WETH.address?Math.pow(10,WETH.decimals):Math.pow(10,selectedToken.info.decimals)*(amountIn*(1+STAKEFEE)))\r\n        const contract = getContract(assetIn, ERC20_ABI,library,account);\r\n        const result = (await contract.functions.allowance(account,marketOrder))[0];\r\n        if(result.lt(allowai)){\r\n          const rt = await contract.approve(marketOrder, getBigNumber(Math.pow(2,255)));\r\n          await rt.wait();\r\n        }\r\n      }\r\n      console.log({\r\n        assetIn,\r\n        assetOut,\r\n        ai,\r\n        ao,\r\n        path,\r\n        options})\r\n      let gasLimit;\r\n      if(assetIn==WETH.address) {\r\n        console.log('1')\r\n        gasLimit = await marketContract.estimateGas.myswapExactETHForTokens(ai,ao,path,account,deadline,options);\r\n      }\r\n      if(assetOut==WETH.address) {\r\n        console.log('2')\r\n        gasLimit = await marketContract.estimateGas.swapExactTokensForETH(ai,ao,path,account,deadline,options);\r\n      }\r\n      if (assetIn!=WETH.address && assetOut!=WETH.address){\r\n        console.log('3')\r\n        gasLimit = await marketContract.estimateGas.swapExactTokensForTokens(ai,ao,path,account,deadline,options);\r\n      }\r\n      options.gasLimit = gasLimit;\r\n      let tx;\r\n      if(assetIn==WETH.address) {\r\n        tx = await marketContract.myswapExactETHForTokens(ai,ao,path,account,deadline,options);\r\n      }\r\n      if(assetOut==WETH.address) {\r\n        tx = await marketContract.swapExactTokensForETH(ai,ao,path,account,deadline,options);\r\n      }\r\n      if (assetIn!=WETH.address && assetOut!=WETH.address){\r\n        tx = await marketContract.swapExactTokensForTokens(ai,ao,path,account,deadline,options);\r\n      }\r\n      \r\n      setAmountBuy(0);\r\n      setAmountSell(0);\r\n      setTotalBuy(0);\r\n      setTotalSell(0);\r\n      setDisabled(false);\r\n      return(tx);\r\n    }catch(e){\r\n      setDisabled(false);\r\n      console.log(e)\r\n    }\r\n    return(undefined);\r\n\r\n  }\r\n\r\n  const sendLimitOrder=async(assetIn,assetOut,amountIn,amountOut)=>{\r\n    setDisabled(true);\r\n    console.log({assetIn,assetOut,amountIn,amountOut})\r\n\r\n    try{\r\n      const ordertype = assetIn==WETH.address?0:assetOut==WETH.address?1:2;\r\n      const path = [assetIn,assetOut];\r\n      let options = {\r\n            gasLimit : 0,\r\n            value:getBigNumber(\r\n              (WETH.address==assetIn?(amountIn*(1+STAKEFEE)+EXECUTOR_FEE):EXECUTOR_FEE)\r\n              *Math.pow(10,WETH.decimals)\r\n              )\r\n      };        \r\n      const ai = getBigNumber((assetIn==WETH.address?Math.pow(10,WETH.decimals):Math.pow(10,selectedToken.info.decimals))*amountIn)\r\n      const ao = getBigNumber((amountOut==WETH.address?Math.pow(10,WETH.decimals):Math.pow(10,selectedToken.info.decimals))*amountOut)\r\n      const efee = getBigNumber(EXECUTOR_FEE*Math.pow(10,WETH.decimals));\r\n      if(WETH.address!=assetIn){\r\n        const allowai = getBigNumber(assetIn==WETH.address?Math.pow(10,WETH.decimals):Math.pow(10,selectedToken.info.decimals)*(amountIn*(1+STAKEFEE)))\r\n        const contract = getContract(assetIn, ERC20_ABI,library,account);\r\n        const result = (await contract.functions.allowance(account,limitOrder))[0];\r\n        if(result.lt(allowai)){\r\n          console.log({allowai,result})\r\n          const rt = await contract.approve(limitOrder, getBigNumber(Math.pow(2,255)));\r\n          await rt.tx.wait();\r\n        }\r\n      }\r\n      console.log({ordertype,\r\n        assetIn,\r\n        assetOut,\r\n        ai,\r\n        ao,\r\n        path,\r\n        efee,\r\n        options})\r\n      const gasLimit = await limitContract.estimateGas.createOrder(ordertype,assetIn,assetOut,ai,ao,path,efee,options)\r\n      options.gasLimit = gasLimit;\r\n      const tx = await limitContract.createOrder(\r\n        ordertype,\r\n        assetIn,\r\n        assetOut,\r\n        ai,\r\n        ao,\r\n        path,\r\n        efee,\r\n        options);\r\n      setAmountBuy(0);\r\n      setAmountSell(0);\r\n      setTotalBuy(0);\r\n      setTotalSell(0);\r\n      setDisabled(false);\r\n      return(tx);\r\n    }catch(e){\r\n      setDisabled(false);\r\n      console.log(e)\r\n    }\r\n    return(undefined);\r\n\r\n  }\r\n\r\n  const onBuy = async()=>{\r\n    if(orderType=='limit'){\r\n      const response = await sendLimitOrder(\r\n        selectedToken.info.quote==\"BNB\"?WETH.address:selectedToken.address,\r\n        selectedToken.info.base==\"BNB\"?WETH.address:selectedToken.address,\r\n        Number(totalBuy),\r\n        Number(amountBuy)\r\n      )      \r\n      if(response){\r\n        const regist = await fetch(getapiquery(response,'buy','limit',Number(totalBuy),selectedToken.info.quote));\r\n      }\r\n    }else{\r\n      const response = await sendMarketOrder(\r\n        selectedToken.info.quote==\"BNB\"?WETH.address:selectedToken.address,\r\n        selectedToken.info.base==\"BNB\"?WETH.address:selectedToken.address,\r\n        Number(totalBuy),\r\n        Number(amountBuy)\r\n      )      \r\n      if(response){\r\n        const regist = await fetch(getapiquery(response,'buy','market',Number(totalBuy),selectedToken.info.quote));\r\n      }\r\n    }\r\n  }\r\n\r\n  const onSell = async()=>{\r\n    if(orderType=='limit'){\r\n      const response = await sendLimitOrder(\r\n        selectedToken.info.base==\"BNB\"?WETH.address:selectedToken.address,\r\n        selectedToken.info.quote==\"BNB\"?WETH.address:selectedToken.address,\r\n        Number(amountSell),\r\n        Number(totalSell)\r\n      )    \r\n      if(response){\r\n        const regist = await fetch(getapiquery(response,'sell','limit',Number(amountSell),selectedToken.info.base));\r\n      }\r\n    }else{\r\n      const response = await sendMarketOrder(\r\n        selectedToken.info.base==\"BNB\"?WETH.address:selectedToken.address,\r\n        selectedToken.info.quote==\"BNB\"?WETH.address:selectedToken.address,\r\n        Number(amountSell),\r\n        Number(totalSell)\r\n      )    \r\n      if(response){\r\n        const regist = await fetch(getapiquery(response,'sell','market',Number(amountSell),selectedToken.info.base));\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  const getapiquery=(response,side,ordertype,inAmount,inAsset)=>{\r\n      let apiquery=\"\";\r\n      if(selectedToken){\r\n          const trid =response.hash;\r\n          const prefix = window.location.protocol+\"//\"+window.location.hostname;\r\n\r\n          apiquery = prefix+\"/api/createorder?chainid=56&owner=\"+account+\r\n               \"&pairs=\"+selectedToken.info.base+selectedToken.info.quote+\"&side=\"+side+\"&transactionid=\"+trid+\"&trstatus=pending&ordertype=\"+ordertype;\r\n          \r\n          apiquery = apiquery+\"&orderstatus=executed\";\r\n          apiquery = apiquery+\"&orderid=0&inAmount=\"+inAmount+\"&inAsset=\"+inAsset;\r\n          if(ordertype.indexOf(\"market\")>=0){\r\n              const tokenprice = (\r\n                    side=='buy'?Number(fixedLength(Number(totalBuy)/Number(amountBuy))):Number(fixedLength(Number(totalSell)/Number(amountSell)))\r\n                  );\r\n              apiquery = apiquery+\"&price=\"+tokenprice;\r\n          }else{\r\n              apiquery = apiquery+\"&price=\"+(\r\n                      side=='buy'?priceBuy:priceSell\r\n              );\r\n          }\r\n          apiquery = apiquery+\"&amount=\"+(\r\n                side=='buy'?amountBuy:amountSell\r\n          );   \r\n          console.log(apiquery);         \r\n      }\r\n  \r\n      return  apiquery;   \r\n  }  \r\n  return (\r\n     <div className=\"col-12 col-lg-4 bg-dark text-white\">\r\n      <div className=\"d-flex justify-content-between align-items-center mt-2 mb-2\">\r\n        <div role=\"button\" className={\"text-1 \"+(orderType=='limit'?\"text-warning\":\"text-muted\")} onClick={()=>{setOrderType('limit');resetAll()}}>Limit Order</div>\r\n        <div role=\"button\" className={\"text-1 \"+(orderType=='market'?\"text-warning\":\"text-muted\")} onClick={()=>{setOrderType('market');resetAll()}}>Market Order</div>\r\n        <div className=\"ps-2 pe-2\" id=\"buy-crypto\">\r\n          <img src=\"./assets/images/visa.svg\" alt=\"\" width={24} height={24} className=\"d-inline-block\" />\r\n          <img src=\"./assets/images/mastercard.svg\" alt=\"\" width={24} height={24} className=\"d-inline-block\" />\r\n          <span className=\"text-white smaller-text\">Buy Crypto</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"row\">\r\n        <div className=\"col-6\">\r\n          {orderType=='limit' && \r\n          <>\r\n            <label htmlFor={\"basic-url\"} className=\"form-label mb-1 d-flex justify-content-between text-1 text-light\">\r\n              <span>Price</span>\r\n              <a className=\"text-light\" role=\"button\" onClick={()=>setPriceBuy(ask)}>Best Ask</a>\r\n            </label>\r\n            <div className=\"input-group input-group-sm mb-1\">\r\n              <input type=\"number\" value={priceBuy} onChange={(e)=>setPriceBuy(e.currentTarget.value)} className=\"form-control bg-secondary text-white border-0\" aria-label=\"Amount (to the nearest dollar)\" />\r\n              <span className=\"input-group-text bg-secondary text-light border-0\">{selectedToken?.info.quote}</span>\r\n            </div>\r\n          </>\r\n          }\r\n\r\n          <label htmlFor={\"basic-url\"} className=\"form-label mb-1 d-flex justify-content-between text-1 text-light\">\r\n            <span>Amount</span>\r\n            <span>\r\n              <a className=\"text-light\" role=\"button\" style={{\"padding\":\"3px\"}} onClick={()=>setPercentBuy(0.25)}>25%</a>\r\n              <a className=\"text-light\" role=\"button\" style={{\"padding\":\"3px\"}} onClick={()=>setPercentBuy(0.5)}>50%</a>\r\n              <a className=\"text-light\" role=\"button\" style={{\"padding\":\"3px\"}} onClick={()=>setPercentBuy(0.75)}>75%</a>\r\n              <a className=\"text-light\" role=\"button\" style={{\"padding\":\"3px\"}} onClick={()=>setPercentBuy(1)}>100%</a>\r\n            </span>\r\n          </label>\r\n          <div className=\"input-group input-group-sm mb-1\">\r\n            <input type=\"number\" value={amountBuy} onChange={(e)=>{setAmountBuyCall(e.currentTarget.value);}}  className=\"form-control bg-secondary text-white border-0\" aria-label=\"Amount (to the nearest dollar)\" />\r\n            <span className=\"input-group-text bg-secondary text-light border-0\">{selectedToken?.info.base}</span>\r\n          </div>\r\n          <label htmlFor={\"basic-url\"} className=\"form-label mb-1 d-flex justify-content-between text-1 text-light\">\r\n            <span>Total</span>\r\n            <span>Avbl&nbsp;{balances.quote}{selectedToken?.info.quote}</span>\r\n\r\n          </label>\r\n          <div className=\"input-group input-group-sm mb-1\">\r\n            <input type=\"number\"  readOnly = {true} value={totalBuy} className=\"form-control bg-secondary text-white border-0\" aria-label=\"Amount (to the nearest dollar)\" />\r\n            <span className=\"input-group-text bg-secondary text-light border-0\">{selectedToken?.info.quote}</span>\r\n          </div>\r\n          <div className=\"d-grid mt-3\">\r\n          {active==false &&\r\n            <button className=\"btn btn-buy btn-sm\" type=\"button\" onClick={handleShow}>Connect Wallet</button>\r\n          }\r\n          {active &&\r\n            <button className=\"btn btn-buy btn-sm\" type=\"button\" disabled={disabled || balances.quote<totalBuy} onClick={onBuy}>Buy {selectedToken?selectedToken.info.base:\"\"}</button>\r\n          }\r\n          </div>\r\n        </div>\r\n        <div className=\"col-6\">\r\n        {orderType=='limit' && \r\n          <>\r\n          <label htmlFor={\"basic-url\"} className=\"form-label mb-1 d-flex justify-content-between text-1 text-light\">\r\n            <span>Price</span>\r\n            <a className=\"text-light\"  role=\"button\" onClick={()=>setPriceSell(bid)}>Best Bid</a>\r\n          </label>\r\n          <div className=\"input-group input-group-sm mb-1\">\r\n            <input type=\"number\" value={priceSell} onChange={(e)=>setPriceSell(e.currentTarget.value)}  className=\"form-control bg-secondary text-white border-0\" aria-label=\"Amount (to the nearest dollar)\" />\r\n            <span className=\"input-group-text bg-secondary text-light border-0\">{selectedToken?.info.quote}</span>\r\n          </div>\r\n          </>\r\n         }\r\n          <label htmlFor={\"basic-url\"} className=\"form-label mb-1 d-flex justify-content-between text-1 text-light\">\r\n            <span>Amount</span>\r\n            <span>\r\n              <a className=\"text-light\" role=\"button\" onClick={()=>setPercentSell(0.25)} style={{\"padding\":\"3px\"}}>25%</a>\r\n              <a className=\"text-light\" role=\"button\" onClick={()=>setPercentSell(0.5)} style={{\"padding\":\"3px\"}}>50%</a>\r\n              <a className=\"text-light\" role=\"button\" onClick={()=>setPercentSell(0.75)} style={{\"padding\":\"3px\"}}>75%</a>\r\n              <a className=\"text-light\" role=\"button\" onClick={()=>setPercentSell(1)}  style={{\"padding\":\"3px\"}}>100%</a>\r\n            </span>\r\n          </label>\r\n          <div className=\"input-group input-group-sm mb-1\">\r\n            <input type=\"number\" value={amountSell} onChange={(e)=>{setAmountSell(e.currentTarget.value);}} className=\"form-control bg-secondary text-white border-0\" aria-label=\"Amount (to the nearest dollar)\" />\r\n            <span className=\"input-group-text bg-secondary text-light border-0\">{selectedToken?.info.base}</span>\r\n          </div>\r\n          <label htmlFor={\"basic-url\"} className=\"form-label mb-1 d-flex justify-content-between text-1 text-light\">\r\n            <span>Total</span>\r\n            <span>Avbl&nbsp;{balances.base}{selectedToken?.info.base}</span>\r\n          </label>\r\n          <div className=\"input-group input-group-sm mb-1\">\r\n            <input type=\"number\"  readOnly = {true} value={totalSell} className=\"form-control bg-secondary text-white border-0\" aria-label=\"Amount (to the nearest dollar)\" />\r\n            <span className=\"input-group-text bg-secondary text-light border-0\">{selectedToken?.info.quote}</span>\r\n          </div>\r\n          <div className=\"d-grid mt-3\">\r\n            {active==false &&\r\n            <button className=\"btn btn-sell btn-sm\" type=\"button\"  onClick={handleShow}>Connect Wallet </button>\r\n            }\r\n            {active &&\r\n            <button className=\"btn btn-sell btn-sm\" disabled={disabled || balances.base<amountSell} type=\"button\" onClick={onSell}>Sell {selectedToken?selectedToken.info.base:\"\"}</button>\r\n            }\r\n\r\n          </div>\r\n        </div>\r\n        <div className=\"col-1  pt-2\">\r\n          <i class=\"bi bi-gear-fill\" role=\"button\"  onClick={()=>setShowMore(!showMore)}></i>\r\n         </div>\r\n         {showMore && \r\n           <>\r\n          <div className=\"col-11 \">\r\n            <div className=\"row text-1 \">\r\n              <div className=\"col-9 text-light  pt-2\">\r\n                <span>slip page</span>\r\n                <a className=\"text-light\" role=\"button\" onClick={()=>setSlippagePractice(0.1)} style={{\"padding\":\"3px\"}}>0.1%</a>\r\n                <a className=\"text-light\" role=\"button\" onClick={()=>setSlippagePractice(0.3)} style={{\"padding\":\"3px\"}}>0.3%</a>\r\n                <a className=\"text-light\" role=\"button\" onClick={()=>setSlippagePractice(0.75)} style={{\"padding\":\"3px\"}}>0.75%</a>\r\n                <a className=\"text-light\" role=\"button\" onClick={()=>setSlippagePractice(1)}  style={{\"padding\":\"3px\"}}>1%</a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div className=\"col-12 \">\r\n            <div  className=\"row text-1 \">\r\n              <div className=\"col-6\">\r\n                <div className=\"input-group input-group-sm mb-1\">\r\n                  <input type=\"number\"  value={slippagePractice} className=\"form-control bg-secondary text-white border-0\" aria-label=\"slippage\" onChange={(e)=>setSlippagePractice(e.target.value)}/>\r\n                  <span className=\"input-group-text bg-secondary text-light border-0\">%</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          </>\r\n         }\r\n\r\n\r\n      </div>\r\n        <Modal show={show} onHide={handleClose} \r\n          aria-labelledby=\"contained-modal-title-vcenter\"\r\n          centered\r\n        >      \r\n        <Modal.Header closeButton \r\n          style={{\r\n          display: \"flex\",\r\n          justifyContent: \"center\",\r\n          alignItems: \"center\",\r\n          }}>\r\n            <Modal.Title>\r\n            <h6 className=\"text-center flex-grow-1 text-white\" >Connect Wallet</h6>\r\n            </Modal.Title>\r\n          </Modal.Header>\r\n          <Modal.Body>\r\n            <div className=\"d-none d-xl-block d-flex align-items-center justify-content-between m-3 p-3 bg-secondary\" data-bs-dismiss=\"modal\"  >\r\n              <div role=\"button\" onClick={connectMetamask}>\r\n                <div>Metamask</div>\r\n                <div className=\"fs-6 text-muted\">\r\n                  Available as a browser extension and as a mobile app, MetaMask equips you with a key vault, secure login, token wallet, and token exchange.\r\n                </div>\r\n              </div>\r\n              <i className=\"bi bi-boxes text-warning fs-3\" />\r\n            </div>\r\n            <div role=\"button\" onClick={connectWalletConnect} className=\"d-flex align-items-center justify-content-between m-3 p-3 bg-secondary\">\r\n                <div>WalletConnect</div>\r\n                <i className=\"bi bi-water text-primary fs-3\"></i>\r\n            </div>\r\n\r\n            <div className=\"text-warning fs-6 p-3 text-end\">\r\n              Don't have a wallet? Click here.\r\n            </div>\r\n          </Modal.Body>\r\n        </Modal>      \r\n    </div>\r\n\r\n  );\r\n}\r\n\r\nexport default Trading;\r\n","/root/dex/frontend/src/hook/useSharedState.ts",["284"],"import React, { useState } from \"react\";\r\nimport { useBetween } from \"use-between\";\r\n\r\n// Make a custom hook with your future shared state\r\nconst useFormState = () => {\r\n    const [selectedToken, setSelectedToken]=useState(undefined);\r\n    const [bnbPrice, setBnbPrice]=useState(400);\r\n    const [long, setLong]=useState(true);\r\n    const [ask, setAsk]=useState(0);\r\n    const [bid, setBid]=useState(0);\r\n    const [tokensList,setTokensList]=useState([]);\r\n    const [showPairs,setShowPairs]=useState([]);\r\n\r\n    return {\r\n        selectedToken, setSelectedToken,\r\n        bnbPrice,setBnbPrice,\r\n        long,setLong,\r\n        ask,setAsk,\r\n        bid,setBid,\r\n        tokensList,setTokensList,\r\n        showPairs,setShowPairs\r\n    };\r\n  };\r\n\r\nconst useSharedState = () => useBetween(useFormState);\r\n\r\nexport default useSharedState",["285","286"],"/root/dex/frontend/src/component/common.js",[],"/root/dex/frontend/src/component/contract.js",[],"/root/dex/frontend/src/component/const.js",[],"/root/dex/frontend/src/abi/ERC20.js",[],"/root/dex/frontend/src/abi/LIMIT.js",[],"/root/dex/frontend/src/abi/MARKET.js",[],"/root/dex/frontend/src/abi/PAN.js",[],{"ruleId":"287","replacedBy":"288"},{"ruleId":"289","replacedBy":"290"},{"ruleId":"291","severity":1,"message":"292","line":3,"column":8,"nodeType":"293","messageId":"294","endLine":3,"endColumn":25},{"ruleId":"291","severity":1,"message":"295","line":3,"column":29,"nodeType":"293","messageId":"294","endLine":3,"endColumn":35},{"ruleId":"291","severity":1,"message":"296","line":22,"column":24,"nodeType":"293","messageId":"294","endLine":22,"endColumn":40},{"ruleId":"291","severity":1,"message":"297","line":2,"column":35,"nodeType":"293","messageId":"294","endLine":2,"endColumn":46},{"ruleId":"291","severity":1,"message":"298","line":2,"column":47,"nodeType":"293","messageId":"294","endLine":2,"endColumn":54},{"ruleId":"291","severity":1,"message":"299","line":7,"column":41,"nodeType":"293","messageId":"294","endLine":7,"endColumn":49},{"ruleId":"291","severity":1,"message":"300","line":7,"column":62,"nodeType":"293","messageId":"294","endLine":7,"endColumn":65},{"ruleId":"291","severity":1,"message":"301","line":7,"column":73,"nodeType":"293","messageId":"294","endLine":7,"endColumn":77},{"ruleId":"291","severity":1,"message":"302","line":11,"column":9,"nodeType":"293","messageId":"294","endLine":11,"endColumn":16},{"ruleId":"291","severity":1,"message":"303","line":12,"column":16,"nodeType":"293","messageId":"294","endLine":12,"endColumn":24},{"ruleId":"304","severity":1,"message":"305","line":29,"column":29,"nodeType":"306","messageId":"307","endLine":29,"endColumn":31},{"ruleId":"304","severity":1,"message":"305","line":32,"column":52,"nodeType":"306","messageId":"307","endLine":32,"endColumn":54},{"ruleId":"304","severity":1,"message":"305","line":46,"column":34,"nodeType":"306","messageId":"307","endLine":46,"endColumn":36},{"ruleId":"308","severity":1,"message":"309","line":66,"column":6,"nodeType":"310","endLine":66,"endColumn":8,"suggestions":"311"},{"ruleId":"304","severity":1,"message":"305","line":77,"column":31,"nodeType":"306","messageId":"307","endLine":77,"endColumn":33},{"ruleId":"308","severity":1,"message":"312","line":84,"column":8,"nodeType":"310","endLine":84,"endColumn":33,"suggestions":"313"},{"ruleId":"304","severity":1,"message":"305","line":138,"column":39,"nodeType":"306","messageId":"307","endLine":138,"endColumn":41},{"ruleId":"304","severity":1,"message":"305","line":150,"column":37,"nodeType":"306","messageId":"307","endLine":150,"endColumn":39},{"ruleId":"304","severity":1,"message":"305","line":153,"column":37,"nodeType":"306","messageId":"307","endLine":153,"endColumn":39},{"ruleId":"291","severity":1,"message":"297","line":2,"column":35,"nodeType":"293","messageId":"294","endLine":2,"endColumn":46},{"ruleId":"291","severity":1,"message":"298","line":2,"column":47,"nodeType":"293","messageId":"294","endLine":2,"endColumn":54},{"ruleId":"291","severity":1,"message":"296","line":8,"column":24,"nodeType":"293","messageId":"294","endLine":8,"endColumn":40},{"ruleId":"291","severity":1,"message":"300","line":8,"column":63,"nodeType":"293","messageId":"294","endLine":8,"endColumn":66},{"ruleId":"304","severity":1,"message":"305","line":29,"column":22,"nodeType":"306","messageId":"307","endLine":29,"endColumn":24},{"ruleId":"304","severity":1,"message":"305","line":43,"column":32,"nodeType":"306","messageId":"307","endLine":43,"endColumn":34},{"ruleId":"308","severity":1,"message":"314","line":83,"column":6,"nodeType":"310","endLine":83,"endColumn":21,"suggestions":"315"},{"ruleId":"291","severity":1,"message":"316","line":4,"column":25,"nodeType":"293","messageId":"294","endLine":4,"endColumn":34},{"ruleId":"291","severity":1,"message":"297","line":4,"column":35,"nodeType":"293","messageId":"294","endLine":4,"endColumn":46},{"ruleId":"291","severity":1,"message":"317","line":6,"column":10,"nodeType":"293","messageId":"294","endLine":6,"endColumn":22},{"ruleId":"291","severity":1,"message":"318","line":12,"column":9,"nodeType":"293","messageId":"294","endLine":12,"endColumn":18},{"ruleId":"291","severity":1,"message":"319","line":15,"column":57,"nodeType":"293","messageId":"294","endLine":15,"endColumn":64},{"ruleId":"304","severity":1,"message":"305","line":22,"column":14,"nodeType":"306","messageId":"307","endLine":22,"endColumn":16},{"ruleId":"304","severity":1,"message":"320","line":51,"column":17,"nodeType":"306","messageId":"307","endLine":51,"endColumn":19},{"ruleId":"321","severity":1,"message":"322","line":64,"column":11,"nodeType":"323","endLine":64,"endColumn":61},{"ruleId":"321","severity":1,"message":"322","line":73,"column":17,"nodeType":"323","endLine":73,"endColumn":109},{"ruleId":"321","severity":1,"message":"324","line":78,"column":17,"nodeType":"323","endLine":78,"endColumn":131},{"ruleId":"321","severity":1,"message":"324","line":80,"column":23,"nodeType":"323","endLine":80,"endColumn":87},{"ruleId":"321","severity":1,"message":"324","line":86,"column":17,"nodeType":"323","endLine":86,"endColumn":76},{"ruleId":"321","severity":1,"message":"322","line":90,"column":17,"nodeType":"323","endLine":91,"endColumn":94},{"ruleId":"321","severity":1,"message":"322","line":100,"column":23,"nodeType":"323","endLine":100,"endColumn":61},{"ruleId":"321","severity":1,"message":"322","line":101,"column":23,"nodeType":"323","endLine":101,"endColumn":72},{"ruleId":"321","severity":1,"message":"322","line":102,"column":23,"nodeType":"323","endLine":102,"endColumn":72},{"ruleId":"321","severity":1,"message":"322","line":103,"column":23,"nodeType":"323","endLine":103,"endColumn":72},{"ruleId":"321","severity":1,"message":"322","line":104,"column":23,"nodeType":"323","endLine":104,"endColumn":72},{"ruleId":"321","severity":1,"message":"322","line":105,"column":23,"nodeType":"323","endLine":105,"endColumn":72},{"ruleId":"321","severity":1,"message":"322","line":110,"column":17,"nodeType":"323","endLine":111,"endColumn":109},{"ruleId":"321","severity":1,"message":"322","line":116,"column":23,"nodeType":"323","endLine":116,"endColumn":61},{"ruleId":"321","severity":1,"message":"322","line":117,"column":23,"nodeType":"323","endLine":117,"endColumn":61},{"ruleId":"321","severity":1,"message":"322","line":118,"column":23,"nodeType":"323","endLine":118,"endColumn":61},{"ruleId":"321","severity":1,"message":"322","line":119,"column":23,"nodeType":"323","endLine":119,"endColumn":61},{"ruleId":"321","severity":1,"message":"322","line":120,"column":23,"nodeType":"323","endLine":120,"endColumn":61},{"ruleId":"321","severity":1,"message":"322","line":121,"column":23,"nodeType":"323","endLine":121,"endColumn":61},{"ruleId":"321","severity":1,"message":"322","line":122,"column":23,"nodeType":"323","endLine":122,"endColumn":61},{"ruleId":"321","severity":1,"message":"322","line":126,"column":17,"nodeType":"323","endLine":126,"endColumn":140},{"ruleId":"321","severity":1,"message":"322","line":130,"column":23,"nodeType":"323","endLine":130,"endColumn":61},{"ruleId":"321","severity":1,"message":"322","line":131,"column":23,"nodeType":"323","endLine":131,"endColumn":61},{"ruleId":"321","severity":1,"message":"322","line":132,"column":23,"nodeType":"323","endLine":132,"endColumn":61},{"ruleId":"291","severity":1,"message":"325","line":3,"column":16,"nodeType":"293","messageId":"294","endLine":3,"endColumn":24},{"ruleId":"291","severity":1,"message":"316","line":3,"column":25,"nodeType":"293","messageId":"294","endLine":3,"endColumn":34},{"ruleId":"291","severity":1,"message":"326","line":3,"column":35,"nodeType":"293","messageId":"294","endLine":3,"endColumn":41},{"ruleId":"291","severity":1,"message":"297","line":3,"column":42,"nodeType":"293","messageId":"294","endLine":3,"endColumn":53},{"ruleId":"291","severity":1,"message":"298","line":3,"column":54,"nodeType":"293","messageId":"294","endLine":3,"endColumn":61},{"ruleId":"291","severity":1,"message":"327","line":16,"column":46,"nodeType":"293","messageId":"294","endLine":16,"endColumn":53},{"ruleId":"291","severity":1,"message":"328","line":16,"column":58,"nodeType":"293","messageId":"294","endLine":16,"endColumn":64},{"ruleId":"321","severity":1,"message":"324","line":29,"column":17,"nodeType":"323","endLine":29,"endColumn":98},{"ruleId":"291","severity":1,"message":"297","line":2,"column":35,"nodeType":"293","messageId":"294","endLine":2,"endColumn":46},{"ruleId":"291","severity":1,"message":"298","line":2,"column":47,"nodeType":"293","messageId":"294","endLine":2,"endColumn":54},{"ruleId":"291","severity":1,"message":"296","line":12,"column":24,"nodeType":"293","messageId":"294","endLine":12,"endColumn":40},{"ruleId":"291","severity":1,"message":"329","line":13,"column":29,"nodeType":"293","messageId":"294","endLine":13,"endColumn":37},{"ruleId":"291","severity":1,"message":"330","line":18,"column":10,"nodeType":"293","messageId":"294","endLine":18,"endColumn":23},{"ruleId":"291","severity":1,"message":"331","line":18,"column":24,"nodeType":"293","messageId":"294","endLine":18,"endColumn":40},{"ruleId":"291","severity":1,"message":"332","line":19,"column":24,"nodeType":"293","messageId":"294","endLine":19,"endColumn":40},{"ruleId":"291","severity":1,"message":"333","line":20,"column":10,"nodeType":"293","messageId":"294","endLine":20,"endColumn":22},{"ruleId":"291","severity":1,"message":"334","line":20,"column":23,"nodeType":"293","messageId":"294","endLine":20,"endColumn":39},{"ruleId":"291","severity":1,"message":"335","line":22,"column":10,"nodeType":"293","messageId":"294","endLine":22,"endColumn":25},{"ruleId":"291","severity":1,"message":"336","line":22,"column":26,"nodeType":"293","messageId":"294","endLine":22,"endColumn":44},{"ruleId":"337","severity":1,"message":"338","line":50,"column":27,"nodeType":"339","messageId":"340","endLine":50,"endColumn":29},{"ruleId":"304","severity":1,"message":"305","line":51,"column":23,"nodeType":"306","messageId":"307","endLine":51,"endColumn":25},{"ruleId":"304","severity":1,"message":"320","line":58,"column":26,"nodeType":"306","messageId":"307","endLine":58,"endColumn":28},{"ruleId":"304","severity":1,"message":"305","line":72,"column":40,"nodeType":"306","messageId":"307","endLine":72,"endColumn":42},{"ruleId":"308","severity":1,"message":"341","line":106,"column":6,"nodeType":"310","endLine":106,"endColumn":46,"suggestions":"342"},{"ruleId":"337","severity":1,"message":"343","line":148,"column":40,"nodeType":"339","messageId":"344","endLine":148,"endColumn":42},{"ruleId":"304","severity":1,"message":"305","line":208,"column":30,"nodeType":"306","messageId":"307","endLine":208,"endColumn":32},{"ruleId":"304","severity":1,"message":"305","line":208,"column":46,"nodeType":"306","messageId":"307","endLine":208,"endColumn":48},{"ruleId":"304","severity":1,"message":"305","line":211,"column":30,"nodeType":"306","messageId":"307","endLine":211,"endColumn":32},{"ruleId":"304","severity":1,"message":"305","line":211,"column":46,"nodeType":"306","messageId":"307","endLine":211,"endColumn":48},{"ruleId":"321","severity":1,"message":"324","line":218,"column":21,"nodeType":"323","endLine":218,"endColumn":94},{"ruleId":"321","severity":1,"message":"324","line":224,"column":21,"nodeType":"323","endLine":224,"endColumn":94},{"ruleId":"321","severity":1,"message":"324","line":229,"column":21,"nodeType":"323","endLine":229,"endColumn":94},{"ruleId":"337","severity":1,"message":"343","line":258,"column":46,"nodeType":"339","messageId":"344","endLine":258,"endColumn":48},{"ruleId":"304","severity":1,"message":"305","line":260,"column":33,"nodeType":"306","messageId":"307","endLine":260,"endColumn":35},{"ruleId":"304","severity":1,"message":"305","line":261,"column":33,"nodeType":"306","messageId":"307","endLine":261,"endColumn":35},{"ruleId":"304","severity":1,"message":"305","line":261,"column":50,"nodeType":"306","messageId":"307","endLine":261,"endColumn":52},{"ruleId":"304","severity":1,"message":"305","line":262,"column":33,"nodeType":"306","messageId":"307","endLine":262,"endColumn":35},{"ruleId":"304","severity":1,"message":"305","line":262,"column":50,"nodeType":"306","messageId":"307","endLine":262,"endColumn":52},{"ruleId":"337","severity":1,"message":"343","line":299,"column":42,"nodeType":"339","messageId":"344","endLine":299,"endColumn":44},{"ruleId":"291","severity":1,"message":"297","line":2,"column":35,"nodeType":"293","messageId":"294","endLine":2,"endColumn":46},{"ruleId":"291","severity":1,"message":"298","line":2,"column":47,"nodeType":"293","messageId":"294","endLine":2,"endColumn":54},{"ruleId":"291","severity":1,"message":"296","line":8,"column":24,"nodeType":"293","messageId":"294","endLine":8,"endColumn":40},{"ruleId":"345","severity":1,"message":"346","line":58,"column":40,"nodeType":"347","messageId":"348","endLine":58,"endColumn":42},{"ruleId":"304","severity":1,"message":"305","line":58,"column":62,"nodeType":"306","messageId":"307","endLine":58,"endColumn":64},{"ruleId":"345","severity":1,"message":"346","line":58,"column":66,"nodeType":"347","messageId":"348","endLine":58,"endColumn":68},{"ruleId":"291","severity":1,"message":"297","line":4,"column":35,"nodeType":"293","messageId":"294","endLine":4,"endColumn":46},{"ruleId":"291","severity":1,"message":"298","line":4,"column":47,"nodeType":"293","messageId":"294","endLine":4,"endColumn":54},{"ruleId":"291","severity":1,"message":"317","line":6,"column":10,"nodeType":"293","messageId":"294","endLine":6,"endColumn":22},{"ruleId":"291","severity":1,"message":"349","line":16,"column":9,"nodeType":"293","messageId":"294","endLine":16,"endColumn":16},{"ruleId":"291","severity":1,"message":"350","line":21,"column":7,"nodeType":"293","messageId":"294","endLine":21,"endColumn":18},{"ruleId":"304","severity":1,"message":"305","line":31,"column":14,"nodeType":"306","messageId":"307","endLine":31,"endColumn":16},{"ruleId":"351","severity":1,"message":"352","line":65,"column":11,"nodeType":"293","messageId":"353","endLine":65,"endColumn":12},{"ruleId":"291","severity":1,"message":"296","line":77,"column":24,"nodeType":"293","messageId":"294","endLine":77,"endColumn":40},{"ruleId":"291","severity":1,"message":"299","line":77,"column":41,"nodeType":"293","messageId":"294","endLine":77,"endColumn":49},{"ruleId":"291","severity":1,"message":"301","line":77,"column":50,"nodeType":"293","messageId":"294","endLine":77,"endColumn":54},{"ruleId":"291","severity":1,"message":"327","line":77,"column":55,"nodeType":"293","messageId":"294","endLine":77,"endColumn":62},{"ruleId":"291","severity":1,"message":"354","line":84,"column":20,"nodeType":"293","messageId":"294","endLine":84,"endColumn":32},{"ruleId":"304","severity":1,"message":"305","line":106,"column":18,"nodeType":"306","messageId":"307","endLine":106,"endColumn":20},{"ruleId":"304","severity":1,"message":"305","line":107,"column":18,"nodeType":"306","messageId":"307","endLine":107,"endColumn":20},{"ruleId":"304","severity":1,"message":"320","line":110,"column":64,"nodeType":"306","messageId":"307","endLine":110,"endColumn":66},{"ruleId":"304","severity":1,"message":"320","line":116,"column":61,"nodeType":"306","messageId":"307","endLine":116,"endColumn":63},{"ruleId":"304","severity":1,"message":"305","line":125,"column":43,"nodeType":"306","messageId":"307","endLine":125,"endColumn":45},{"ruleId":"304","severity":1,"message":"305","line":126,"column":43,"nodeType":"306","messageId":"307","endLine":126,"endColumn":45},{"ruleId":"304","severity":1,"message":"305","line":127,"column":46,"nodeType":"306","messageId":"307","endLine":127,"endColumn":48},{"ruleId":"304","severity":1,"message":"305","line":128,"column":46,"nodeType":"306","messageId":"307","endLine":128,"endColumn":48},{"ruleId":"304","severity":1,"message":"305","line":132,"column":47,"nodeType":"306","messageId":"307","endLine":132,"endColumn":49},{"ruleId":"304","severity":1,"message":"305","line":139,"column":49,"nodeType":"306","messageId":"307","endLine":139,"endColumn":51},{"ruleId":"304","severity":1,"message":"305","line":147,"column":38,"nodeType":"306","messageId":"307","endLine":147,"endColumn":40},{"ruleId":"304","severity":1,"message":"305","line":148,"column":40,"nodeType":"306","messageId":"307","endLine":148,"endColumn":42},{"ruleId":"304","severity":1,"message":"305","line":150,"column":41,"nodeType":"306","messageId":"307","endLine":150,"endColumn":43},{"ruleId":"304","severity":1,"message":"305","line":151,"column":43,"nodeType":"306","messageId":"307","endLine":151,"endColumn":45},{"ruleId":"304","severity":1,"message":"305","line":153,"column":18,"nodeType":"306","messageId":"307","endLine":153,"endColumn":20},{"ruleId":"304","severity":1,"message":"305","line":154,"column":43,"nodeType":"306","messageId":"307","endLine":154,"endColumn":45},{"ruleId":"304","severity":1,"message":"305","line":162,"column":19,"nodeType":"306","messageId":"307","endLine":162,"endColumn":21},{"ruleId":"308","severity":1,"message":"355","line":177,"column":5,"nodeType":"310","endLine":177,"endColumn":66,"suggestions":"356"},{"ruleId":"304","severity":1,"message":"305","line":181,"column":19,"nodeType":"306","messageId":"307","endLine":181,"endColumn":21},{"ruleId":"308","severity":1,"message":"357","line":191,"column":5,"nodeType":"310","endLine":191,"endColumn":59,"suggestions":"358"},{"ruleId":"359","severity":1,"message":"360","line":200,"column":22,"nodeType":"361","messageId":"362","endLine":200,"endColumn":23,"fix":"363"},{"ruleId":"304","severity":1,"message":"305","line":201,"column":43,"nodeType":"306","messageId":"307","endLine":201,"endColumn":45},{"ruleId":"304","severity":1,"message":"305","line":202,"column":45,"nodeType":"306","messageId":"307","endLine":202,"endColumn":47},{"ruleId":"304","severity":1,"message":"305","line":207,"column":27,"nodeType":"306","messageId":"307","endLine":207,"endColumn":29},{"ruleId":"304","severity":1,"message":"305","line":209,"column":21,"nodeType":"306","messageId":"307","endLine":209,"endColumn":23},{"ruleId":"308","severity":1,"message":"364","line":218,"column":5,"nodeType":"310","endLine":218,"endColumn":45,"suggestions":"365"},{"ruleId":"304","severity":1,"message":"305","line":222,"column":17,"nodeType":"306","messageId":"307","endLine":222,"endColumn":19},{"ruleId":"308","severity":1,"message":"366","line":229,"column":6,"nodeType":"310","endLine":229,"endColumn":23,"suggestions":"367"},{"ruleId":"304","severity":1,"message":"305","line":252,"column":28,"nodeType":"306","messageId":"307","endLine":252,"endColumn":30},{"ruleId":"304","severity":1,"message":"305","line":256,"column":39,"nodeType":"306","messageId":"307","endLine":256,"endColumn":41},{"ruleId":"304","severity":1,"message":"305","line":257,"column":41,"nodeType":"306","messageId":"307","endLine":257,"endColumn":43},{"ruleId":"304","severity":1,"message":"320","line":258,"column":22,"nodeType":"306","messageId":"307","endLine":258,"endColumn":24},{"ruleId":"304","severity":1,"message":"305","line":259,"column":45,"nodeType":"306","messageId":"307","endLine":259,"endColumn":47},{"ruleId":"304","severity":1,"message":"305","line":275,"column":17,"nodeType":"306","messageId":"307","endLine":275,"endColumn":19},{"ruleId":"304","severity":1,"message":"305","line":279,"column":18,"nodeType":"306","messageId":"307","endLine":279,"endColumn":20},{"ruleId":"304","severity":1,"message":"320","line":283,"column":18,"nodeType":"306","messageId":"307","endLine":283,"endColumn":20},{"ruleId":"304","severity":1,"message":"320","line":283,"column":44,"nodeType":"306","messageId":"307","endLine":283,"endColumn":46},{"ruleId":"304","severity":1,"message":"305","line":289,"column":17,"nodeType":"306","messageId":"307","endLine":289,"endColumn":19},{"ruleId":"304","severity":1,"message":"305","line":292,"column":18,"nodeType":"306","messageId":"307","endLine":292,"endColumn":20},{"ruleId":"304","severity":1,"message":"320","line":295,"column":18,"nodeType":"306","messageId":"307","endLine":295,"endColumn":20},{"ruleId":"304","severity":1,"message":"320","line":295,"column":44,"nodeType":"306","messageId":"307","endLine":295,"endColumn":46},{"ruleId":"304","severity":1,"message":"305","line":318,"column":32,"nodeType":"306","messageId":"307","endLine":318,"endColumn":34},{"ruleId":"304","severity":1,"message":"305","line":318,"column":57,"nodeType":"306","messageId":"307","endLine":318,"endColumn":59},{"ruleId":"304","severity":1,"message":"305","line":323,"column":28,"nodeType":"306","messageId":"307","endLine":323,"endColumn":30},{"ruleId":"304","severity":1,"message":"305","line":327,"column":39,"nodeType":"306","messageId":"307","endLine":327,"endColumn":41},{"ruleId":"304","severity":1,"message":"305","line":328,"column":41,"nodeType":"306","messageId":"307","endLine":328,"endColumn":43},{"ruleId":"304","severity":1,"message":"320","line":330,"column":22,"nodeType":"306","messageId":"307","endLine":330,"endColumn":24},{"ruleId":"304","severity":1,"message":"305","line":331,"column":45,"nodeType":"306","messageId":"307","endLine":331,"endColumn":47},{"ruleId":"304","severity":1,"message":"305","line":374,"column":17,"nodeType":"306","messageId":"307","endLine":374,"endColumn":19},{"ruleId":"304","severity":1,"message":"305","line":376,"column":33,"nodeType":"306","messageId":"307","endLine":376,"endColumn":35},{"ruleId":"304","severity":1,"message":"305","line":377,"column":32,"nodeType":"306","messageId":"307","endLine":377,"endColumn":34},{"ruleId":"291","severity":1,"message":"368","line":382,"column":15,"nodeType":"293","messageId":"294","endLine":382,"endColumn":21},{"ruleId":"304","severity":1,"message":"305","line":386,"column":33,"nodeType":"306","messageId":"307","endLine":386,"endColumn":35},{"ruleId":"304","severity":1,"message":"305","line":387,"column":32,"nodeType":"306","messageId":"307","endLine":387,"endColumn":34},{"ruleId":"291","severity":1,"message":"368","line":392,"column":15,"nodeType":"293","messageId":"294","endLine":392,"endColumn":21},{"ruleId":"304","severity":1,"message":"305","line":398,"column":17,"nodeType":"306","messageId":"307","endLine":398,"endColumn":19},{"ruleId":"304","severity":1,"message":"305","line":400,"column":32,"nodeType":"306","messageId":"307","endLine":400,"endColumn":34},{"ruleId":"304","severity":1,"message":"305","line":401,"column":33,"nodeType":"306","messageId":"307","endLine":401,"endColumn":35},{"ruleId":"291","severity":1,"message":"368","line":406,"column":15,"nodeType":"293","messageId":"294","endLine":406,"endColumn":21},{"ruleId":"304","severity":1,"message":"305","line":410,"column":32,"nodeType":"306","messageId":"307","endLine":410,"endColumn":34},{"ruleId":"304","severity":1,"message":"305","line":411,"column":33,"nodeType":"306","messageId":"307","endLine":411,"endColumn":35},{"ruleId":"291","severity":1,"message":"368","line":416,"column":15,"nodeType":"293","messageId":"294","endLine":416,"endColumn":21},{"ruleId":"304","severity":1,"message":"305","line":435,"column":25,"nodeType":"306","messageId":"307","endLine":435,"endColumn":27},{"ruleId":"304","severity":1,"message":"305","line":440,"column":27,"nodeType":"306","messageId":"307","endLine":440,"endColumn":29},{"ruleId":"304","severity":1,"message":"305","line":444,"column":21,"nodeType":"306","messageId":"307","endLine":444,"endColumn":23},{"ruleId":"304","severity":1,"message":"305","line":454,"column":59,"nodeType":"306","messageId":"307","endLine":454,"endColumn":61},{"ruleId":"304","severity":1,"message":"305","line":455,"column":59,"nodeType":"306","messageId":"307","endLine":455,"endColumn":61},{"ruleId":"304","severity":1,"message":"305","line":464,"column":21,"nodeType":"306","messageId":"307","endLine":464,"endColumn":23},{"ruleId":"321","severity":1,"message":"324","line":468,"column":15,"nodeType":"323","endLine":468,"endColumn":86},{"ruleId":"321","severity":1,"message":"324","line":480,"column":15,"nodeType":"323","endLine":480,"endColumn":115},{"ruleId":"321","severity":1,"message":"324","line":481,"column":15,"nodeType":"323","endLine":481,"endColumn":114},{"ruleId":"321","severity":1,"message":"324","line":482,"column":15,"nodeType":"323","endLine":482,"endColumn":115},{"ruleId":"321","severity":1,"message":"324","line":483,"column":15,"nodeType":"323","endLine":483,"endColumn":112},{"ruleId":"304","severity":1,"message":"305","line":500,"column":18,"nodeType":"306","messageId":"307","endLine":500,"endColumn":20},{"ruleId":"304","severity":1,"message":"305","line":509,"column":19,"nodeType":"306","messageId":"307","endLine":509,"endColumn":21},{"ruleId":"321","severity":1,"message":"324","line":513,"column":13,"nodeType":"323","endLine":513,"endColumn":86},{"ruleId":"321","severity":1,"message":"324","line":524,"column":15,"nodeType":"323","endLine":524,"endColumn":116},{"ruleId":"321","severity":1,"message":"324","line":525,"column":15,"nodeType":"323","endLine":525,"endColumn":115},{"ruleId":"321","severity":1,"message":"324","line":526,"column":15,"nodeType":"323","endLine":526,"endColumn":116},{"ruleId":"321","severity":1,"message":"324","line":527,"column":15,"nodeType":"323","endLine":527,"endColumn":114},{"ruleId":"304","severity":1,"message":"305","line":543,"column":20,"nodeType":"306","messageId":"307","endLine":543,"endColumn":22},{"ruleId":"321","severity":1,"message":"324","line":561,"column":17,"nodeType":"323","endLine":561,"endColumn":122},{"ruleId":"321","severity":1,"message":"324","line":562,"column":17,"nodeType":"323","endLine":562,"endColumn":122},{"ruleId":"321","severity":1,"message":"324","line":563,"column":17,"nodeType":"323","endLine":563,"endColumn":123},{"ruleId":"321","severity":1,"message":"324","line":564,"column":17,"nodeType":"323","endLine":564,"endColumn":121},{"ruleId":"369","severity":1,"message":"370","line":1,"column":8,"nodeType":"293","messageId":"294","endLine":1,"endColumn":13},{"ruleId":"287","replacedBy":"288"},{"ruleId":"289","replacedBy":"290"},"no-native-reassign",["371"],"no-negated-in-lhs",["372"],"no-unused-vars","'TradingViewWidget' is defined but never used.","Identifier","unusedVar","'Themes' is defined but never used.","'setSelectedToken' is assigned a value but never used.","'useCallback' is defined but never used.","'useMemo' is defined but never used.","'bnbPrice' is assigned a value but never used.","'ask' is assigned a value but never used.","'long' is assigned a value but never used.","'options' is assigned a value but never used.","'setOrder' is assigned a value but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'selectedToken', 'setAsk', 'setBid', 'setBnbPrice', 'setLong', 'setSelectedToken', and 'setTokensList'. Either include them or remove the dependency array.","ArrayExpression",["373"],"React Hook useEffect has a missing dependency: 'order'. Either include it or remove the dependency array.",["374"],"React Hook useEffect has missing dependencies: 'setAsk', 'setBid', and 'setLong'. Either include them or remove the dependency array.",["375"],"'useEffect' is defined but never used.","'Web3Provider' is defined but never used.","'onConnect' is assigned a value but never used.","'library' is assigned a value but never used.","Expected '!==' and instead saw '!='.","jsx-a11y/anchor-is-valid","The href attribute requires a valid value to be accessible. Provide a valid, navigable address as the href value. If you cannot provide a valid href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/HEAD/docs/rules/anchor-is-valid.md","JSXOpeningElement","The href attribute is required for an anchor to be keyboard accessible. Provide a valid, navigable address as the href value. If you cannot provide an href, but still need the element to resemble a link, use a button and change it with appropriate styles. Learn more: https://github.com/jsx-eslint/eslint-plugin-jsx-a11y/blob/HEAD/docs/rules/anchor-is-valid.md","'useState' is defined but never used.","'useRef' is defined but never used.","'setLong' is assigned a value but never used.","'setAsk' is assigned a value but never used.","'activate' is assigned a value but never used.","'timespanOrder' is assigned a value but never used.","'setTimespanOrder' is assigned a value but never used.","'setTimespanTrade' is assigned a value but never used.","'busellFilter' is assigned a value but never used.","'setBuysellFilter' is assigned a value but never used.","'hideOthersOrder' is assigned a value but never used.","'setHideOthersOrder' is assigned a value but never used.","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","React Hook useEffect has a missing dependency: 'updateAll'. Either include it or remove the dependency array.",["376"],"Array.prototype.map() expects a value to be returned at the end of arrow function.","expectedAtEnd","no-mixed-operators","Unexpected mix of '||' and '&&'. Use parentheses to clarify the intended order of operations.","LogicalExpression","unexpectedMixedOperator","'PAN_ABI' is defined but never used.","'workChainId' is assigned a value but never used.","no-redeclare","'e' is already defined.","redeclared","'setTimestamp' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'exactIn' and 'updateMarketData'. Either include them or remove the dependency array.",["377"],"React Hook useEffect has a missing dependency: 'updateMarketData'. Either include it or remove the dependency array.",["378"],"rest-spread-spacing","Unexpected whitespace after spread property operator.","ExperimentalSpreadProperty","unexpectedWhitespace",{"range":"379","text":"380"},"React Hook useEffect has missing dependencies: 'chainId', 'orderType', 'updateBalance', and 'updateMarketData'. Either include them or remove the dependency array.",["381"],"React Hook useEffect has a missing dependency: 'updateBalance'. Either include it or remove the dependency array.",["382"],"'regist' is assigned a value but never used.","@typescript-eslint/no-unused-vars","'React' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"383","fix":"384"},{"desc":"385","fix":"386"},{"desc":"387","fix":"388"},{"desc":"389","fix":"390"},{"desc":"391","fix":"392"},{"desc":"393","fix":"394"},[7758,7759],"",{"desc":"395","fix":"396"},{"desc":"397","fix":"398"},"Update the dependencies array to be: [selectedToken, setAsk, setBid, setBnbPrice, setLong, setSelectedToken, setTokensList]",{"range":"399","text":"400"},"Update the dependencies array to be: [tokensList, sortMode, fav, order]",{"range":"401","text":"402"},"Update the dependencies array to be: [selectedToken, setAsk, setBid, setLong]",{"range":"403","text":"404"},"Update the dependencies array to be: [selectedToken, account, active, longShort, updateAll]",{"range":"405","text":"406"},"Update the dependencies array to be: [selectedToken, account, priceBuy, amountBuy, totalBuy, orderType, exactIn, updateMarketData]",{"range":"407","text":"408"},"Update the dependencies array to be: [selectedToken, account, priceSell, amountSell, orderType, updateMarketData]",{"range":"409","text":"410"},"Update the dependencies array to be: [selectedToken, account, timestamp, active, chainId, updateBalance, orderType, updateMarketData]",{"range":"411","text":"412"},"Update the dependencies array to be: [library, chainId, updateBalance]",{"range":"413","text":"414"},[2464,2466],"[selectedToken, setAsk, setBid, setBnbPrice, setLong, setSelectedToken, setTokensList]",[3136,3161],"[tokensList, sortMode, fav, order]",[2474,2489],"[selectedToken, setAsk, setBid, setLong]",[4241,4281],"[selectedToken, account, active, longShort, updateAll]",[6822,6883],"[selectedToken, account, priceBuy, amountBuy, totalBuy, orderType, exactIn, updateMarketData]",[7237,7291],"[selectedToken, account, priceSell, amountSell, orderType, updateMarketData]",[8281,8321],"[selectedToken, account, timestamp, active, chainId, updateBalance, orderType, updateMarketData]",[8525,8542],"[library, chainId, updateBalance]"]