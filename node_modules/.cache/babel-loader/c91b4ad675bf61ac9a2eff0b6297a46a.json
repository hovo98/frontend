{"ast":null,"code":"var _jsxFileName = \"/root/dex/frontend/src/component/Orderbook.js\",\n    _s = $RefreshSig$();\n\nimport useSharedState from '../hook/useSharedState';\nimport React, { useState, useEffect, useCallback, useMemo } from \"react\";\nimport io from 'socket.io-client';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst orderbookcount = 9;\n\nfunction Orderbook() {\n  _s();\n\n  const {\n    selectedToken,\n    setSelectedToken,\n    bnbPrice,\n    long,\n    setLong,\n    ask,\n    setAsk,\n    setBid\n  } = useSharedState(); //useState(undefined);\n\n  const [orderbook, setOrderbook] = useState({}); //useState(undefined);\n\n  const fixedLength = y => {\n    let num = y;\n    let prec = 6;\n\n    while (num > 10) {\n      num /= 10;\n      prec--;\n    }\n\n    return y.toFixed(prec);\n  };\n\n  const getPercent = (lst, value) => {\n    let max = lst[0][1];\n    let min = lst[0][1];\n    lst.forEach(order => {\n      if (max < order[1]) max = order[1];\n      if (min > order[1]) min = order[1];\n    });\n    console.log({\n      max,\n      min\n    });\n    let percent = max == min ? 0 : (value - min) / (max - min);\n    percent = Math.floor(percent * 4) * 25;\n    return percent;\n  };\n\n  useEffect(() => {\n    let socket = undefined;\n\n    const init = async () => {\n      setOrderbook({});\n      const prefix = window.location.protocol + \"//\" + window.location.hostname;\n      const url = prefix + \"/api/getdata?op=orderbook&symbol=\" + selectedToken.symbol;\n      const response = await fetch(url);\n      const rdata = await response.json();\n      setOrderbook(rdata);\n      setAsk(Number(rdata.asks[0][0]));\n      setBid(Number(rdata.bids[0][0]));\n\n      if (!socket) {\n        socket = io(prefix);\n      } else {\n        socket.leaveAll();\n      }\n\n      socket.emit(\"join\", selectedToken.info.symbol);\n      socket.on(\"orderbook\", function (data) {\n        if (orderbook.bids) {\n          setLong(data.bids[0][0] > Number(orderbook.bids[0][0]));\n        }\n\n        setAsk(Number(data.asks[0][0]));\n        setBid(Number(data.bids[0][0]));\n        setOrderbook(data);\n      });\n    };\n\n    if (selectedToken) init();\n    return () => {\n      if (socket) {\n        socket.disconnect();\n      }\n    };\n  }, [selectedToken]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"order-3 order-lg-3 col-12 col-lg-2 p-1 bg-dark text-white\",\n    children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"nav nav-pills mb-1\",\n      id: \"pills-tab\",\n      role: \"tablist\",\n      children: [/*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"nav-item\",\n        role: \"presentation\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"nav-link bg-transparent\",\n          id: \"pills-graph-tab\",\n          \"data-bs-toggle\": \"pill\",\n          \"data-bs-target\": \"#pills-graph\",\n          type: \"button\",\n          role: \"tab\",\n          \"aria-controls\": \"pills-graph\",\n          \"aria-selected\": \"false\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-graph-up text-white\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"nav-item\",\n        role: \"presentation\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"nav-link bg-transparent\",\n          id: \"pills-graph-up-tab\",\n          \"data-bs-toggle\": \"pill\",\n          \"data-bs-target\": \"#pills-graph-up\",\n          type: \"button\",\n          role: \"tab\",\n          \"aria-controls\": \"pills-graph-up\",\n          \"aria-selected\": \"false\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-graph-up-arrow text-success\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"nav-item\",\n        role: \"presentation\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"nav-link bg-transparent\",\n          id: \"pills-graph-down-tab\",\n          \"data-bs-toggle\": \"pill\",\n          \"data-bs-target\": \"#pills-graph-down\",\n          type: \"button\",\n          role: \"tab\",\n          \"aria-controls\": \"pills-graph-down\",\n          \"aria-selected\": \"false\",\n          children: /*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-graph-down-arrow text-danger\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), orderbook.bids && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"tab-content\",\n      id: \"pills-graph-tabContent\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-pane fade show active\",\n        id: \"pills-graph\",\n        role: \"tabpanel\",\n        \"aria-labelledby\": \"pills-graph-tab\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-responsive\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table text-white table-sm table-borderless\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"text-muted\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 96,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Total\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 97,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 94,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 93,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: function (rows, i, len) {\n                if (orderbook.asks) {\n                  while (i < len) {\n                    rows.push( /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"text-danger\",\n                        children: fixedLength(Number(orderbook.asks[len - i - 1][0]))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 107,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: fixedLength(Number(orderbook.asks[len - i - 1][1]))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 108,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: fixedLength(Number(orderbook.asks[len - i - 1][1]) * Number(orderbook.asks[len - i - 1][0]))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 109,\n                        columnNumber: 29\n                      }, this)]\n                    }, i, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 106,\n                      columnNumber: 27\n                    }, this));\n                    i++;\n                  }\n                }\n\n                return rows;\n              }([], 0, orderbookcount)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 100,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-responsive\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table text-white table-sm table-borderless\",\n            children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                  className: long ? \"text-success\" : \"text-danger\",\n                  children: [orderbook.asks ? fixedLength(Number(orderbook.asks[0][0])) : \"\", /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"bi bi-arrow-\" + (long ? \"up\" : \"down\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 125,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                  className: long ? \"text-success\" : \"text-danger\",\n                  children: [orderbook.bids ? fixedLength(Number(orderbook.bids[0][0])) : \"\", /*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"bi bi-arrow-\" + (long ? \"up\" : \"down\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 129,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 124,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 122,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-responsive\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table text-white table-sm table-borderless\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"text-muted\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 141,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Total\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 140,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 139,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: function (rows, i, len) {\n                if (orderbook.bids) {\n                  while (i < len) {\n                    rows.push( /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"text-success\",\n                        children: fixedLength(Number(orderbook.bids[i][0]))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 153,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: fixedLength(Number(orderbook.bids[i][1]))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 154,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: fixedLength(Number(orderbook.bids[i][1]) * Number(orderbook.bids[i][0]))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 155,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"tr-shadow\",\n                        style: {\n                          \"background\": \"rgba(0, 192, 135, 0.15)\",\n                          \"width\": getPercent(orderbook.bids, orderbook.bids[i][1]) + \"%\"\n                        }\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 156,\n                        columnNumber: 29\n                      }, this)]\n                    }, i, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 152,\n                      columnNumber: 27\n                    }, this));\n                    i++;\n                  }\n                }\n\n                return rows;\n              }([], 0, orderbookcount)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-pane fade\",\n        id: \"pills-graph-down\",\n        role: \"tabpanel\",\n        \"aria-labelledby\": \"pills-graph-down-tab\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-responsive\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table text-white table-sm table-borderless\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"text-muted\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Total\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 172,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: function (rows) {\n                if (orderbook.asks) {\n                  const len = orderbook.asks.length;\n                  let i = 0;\n\n                  while (i < len) {\n                    rows.push( /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"text-danger\",\n                        children: fixedLength(Number(orderbook.asks[len - i - 1][0]))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 188,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: fixedLength(Number(orderbook.asks[len - i - 1][1]))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 189,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: fixedLength(Number(orderbook.asks[len - i - 1][1]) * Number(orderbook.asks[len - i - 1][0]))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 190,\n                        columnNumber: 29\n                      }, this)]\n                    }, i, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 187,\n                      columnNumber: 27\n                    }, this));\n                    i++;\n                  }\n                }\n\n                return rows;\n              }([])\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 171,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"tab-pane fade\",\n        id: \"pills-graph-up\",\n        role: \"tabpanel\",\n        \"aria-labelledby\": \"pills-graph-up-tab\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"table-responsive\",\n          children: /*#__PURE__*/_jsxDEV(\"table\", {\n            className: \"table text-white table-sm table-borderless\",\n            children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n              className: \"text-muted\",\n              children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Price\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Amount\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                  scope: \"col\",\n                  children: \"Total\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n              children: function (rows, i, len) {\n                if (orderbook.bids) {\n                  const len = orderbook.bids.length;\n                  let i = 0;\n\n                  while (i < len) {\n                    rows.push( /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"text-success\",\n                        children: fixedLength(Number(orderbook.bids[i][0]))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 223,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: fixedLength(Number(orderbook.bids[i][1]))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 224,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        children: fixedLength(Number(orderbook.bids[i][1]) * Number(orderbook.bids[i][0]))\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 225,\n                        columnNumber: 29\n                      }, this)]\n                    }, i, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 222,\n                      columnNumber: 27\n                    }, this));\n                    i++;\n                  }\n                }\n\n                return rows;\n              }([], 0, 6)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 203,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 3\n  }, this);\n}\n\n_s(Orderbook, \"pbGJcNViJKg03qBJRTm0WCKHplo=\", false, function () {\n  return [useSharedState];\n});\n\n_c = Orderbook;\nexport default Orderbook;\n\nvar _c;\n\n$RefreshReg$(_c, \"Orderbook\");","map":{"version":3,"sources":["/root/dex/frontend/src/component/Orderbook.js"],"names":["useSharedState","React","useState","useEffect","useCallback","useMemo","io","orderbookcount","Orderbook","selectedToken","setSelectedToken","bnbPrice","long","setLong","ask","setAsk","setBid","orderbook","setOrderbook","fixedLength","y","num","prec","toFixed","getPercent","lst","value","max","min","forEach","order","console","log","percent","Math","floor","socket","undefined","init","prefix","window","location","protocol","hostname","url","symbol","response","fetch","rdata","json","Number","asks","bids","leaveAll","emit","info","on","data","disconnect","rows","i","len","push","length"],"mappings":"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","sourcesContent":["import useSharedState from '../hook/useSharedState'\r\nimport React ,{useState,useEffect,useCallback,useMemo} from \"react\";\r\nimport io from 'socket.io-client';\r\n\r\nconst orderbookcount =9;\r\n\r\nfunction Orderbook() {\r\n  const {selectedToken,setSelectedToken,bnbPrice,long,setLong,ask,setAsk,setBid}=useSharedState();//useState(undefined);\r\n  const [orderbook,setOrderbook]=useState({});//useState(undefined);\r\n  const fixedLength=(y)=> {\r\n    let num = y;\r\n    let prec = 6;\r\n    while(num > 10) {\r\n        num /= 10;\r\n        prec--;\r\n    }\r\n    return y.toFixed(prec);\r\n  }\r\n  const getPercent = (lst,value)=>{\r\n    let max = lst[0][1];\r\n    let min = lst[0][1];\r\n    lst.forEach((order)=>{\r\n      if(max<order[1]) max = order[1];\r\n      if(min>order[1]) min = order[1];\r\n    })\r\n    console.log({max,min})\r\n    let percent = max==min?0:(value-min)/(max-min);\r\n    percent = Math.floor(percent*4) *25;\r\n    return(percent)\r\n\r\n  }\r\n  useEffect(() => {\r\n      let socket=undefined;\r\n      const init=async()=>{\r\n        setOrderbook({});\r\n        const prefix = window.location.protocol+\"//\"+window.location.hostname;\r\n        const url = prefix+\"/api/getdata?op=orderbook&symbol=\"+selectedToken.symbol;\r\n        const response = await fetch(url);\r\n        const rdata = await response.json();\r\n        setOrderbook(rdata);\r\n        setAsk(Number(rdata.asks[0][0]));\r\n        setBid(Number(rdata.bids[0][0]));\r\n        \r\n        if(!socket){\r\n          socket = io(prefix);\r\n        }else{\r\n          socket.leaveAll();\r\n        }\r\n        socket.emit(\"join\",selectedToken.info.symbol);\r\n        socket.on(\"orderbook\", function(data) {\r\n            if(orderbook.bids){\r\n                setLong(data.bids[0][0]>Number(orderbook.bids[0][0]));\r\n            }\r\n            setAsk(Number(data.asks[0][0]));\r\n            setBid(Number(data.bids[0][0]));\r\n\r\n            setOrderbook(data);\r\n        });\r\n      }\r\n      if(selectedToken) init();\r\n      return () => {\r\n        if (socket) {\r\n          socket.disconnect();\r\n        }\r\n      }\r\n  }, [selectedToken]) \r\n\r\n  return (\r\n  <div className=\"order-3 order-lg-3 col-12 col-lg-2 p-1 bg-dark text-white\">\r\n      <ul className=\"nav nav-pills mb-1\" id=\"pills-tab\" role=\"tablist\">\r\n        <li className=\"nav-item\" role=\"presentation\">\r\n          <button className=\"nav-link bg-transparent\" id=\"pills-graph-tab\" data-bs-toggle=\"pill\" data-bs-target=\"#pills-graph\" type=\"button\" role=\"tab\" aria-controls=\"pills-graph\" aria-selected=\"false\">\r\n            <i className=\"bi bi-graph-up text-white\" />\r\n          </button>\r\n        </li>\r\n        <li className=\"nav-item\" role=\"presentation\">\r\n          <button className=\"nav-link bg-transparent\" id=\"pills-graph-up-tab\" data-bs-toggle=\"pill\" data-bs-target=\"#pills-graph-up\" type=\"button\" role=\"tab\" aria-controls=\"pills-graph-up\" aria-selected=\"false\">\r\n            <i className=\"bi bi-graph-up-arrow text-success\" />\r\n          </button>\r\n        </li>\r\n        <li className=\"nav-item\" role=\"presentation\">\r\n          <button className=\"nav-link bg-transparent\" id=\"pills-graph-down-tab\" data-bs-toggle=\"pill\" data-bs-target=\"#pills-graph-down\" type=\"button\" role=\"tab\" aria-controls=\"pills-graph-down\" aria-selected=\"false\">\r\n            <i className=\"bi bi-graph-down-arrow text-danger\" />\r\n          </button>\r\n        </li>\r\n      </ul>\r\n      {orderbook.bids && \r\n\r\n      <div className=\"tab-content\" id=\"pills-graph-tabContent\">\r\n        <div className=\"tab-pane fade show active\" id=\"pills-graph\" role=\"tabpanel\" aria-labelledby=\"pills-graph-tab\">\r\n          <div className=\"table-responsive\">\r\n            <table className=\"table text-white table-sm table-borderless\">\r\n              <thead className=\"text-muted\">\r\n                <tr>\r\n                  <th scope=\"col\">Price</th>\r\n                  <th scope=\"col\">Amount</th>\r\n                  <th scope=\"col\">Total</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                { \r\n                  (function (rows, i, len) {\r\n                    if(orderbook.asks){\r\n                      while (i < len) {\r\n                        rows.push(\r\n                          <tr key={i}>\r\n                            <td className=\"text-danger\">{fixedLength(Number(orderbook.asks[len-i-1][0]))}</td>\r\n                            <td>{fixedLength(Number(orderbook.asks[len-i-1][1]))}</td>\r\n                            <td>{fixedLength(Number(orderbook.asks[len-i-1][1])*Number(orderbook.asks[len-i-1][0]))}</td>\r\n                          </tr>\r\n                        );\r\n                        i++;\r\n                      }\r\n                    }\r\n                    return rows;\r\n                  })([], 0, orderbookcount)\r\n                }\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div className=\"table-responsive\">\r\n            <table className=\"table text-white table-sm table-borderless\">\r\n              <tbody>\r\n                <tr>\r\n                  <td className={long?\"text-success\":\"text-danger\"}>\r\n                    {orderbook.asks ? fixedLength(Number(orderbook.asks[0][0])):\"\"}\r\n                    <i className={\"bi bi-arrow-\"+(long?\"up\":\"down\")} />\r\n                  </td>\r\n                  <td className={long?\"text-success\":\"text-danger\"}>\r\n                    {orderbook.bids ? fixedLength(Number(orderbook.bids[0][0])):\"\"}\r\n                    <i className={\"bi bi-arrow-\"+(long?\"up\":\"down\")} />\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n          <div className=\"table-responsive\">\r\n            <table className=\"table text-white table-sm table-borderless\">\r\n              <thead className=\"text-muted\">\r\n                <tr>\r\n                  <th scope=\"col\">Price</th>\r\n                  <th scope=\"col\">Amount</th>\r\n                  <th scope=\"col\">Total</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                { \r\n                  (function (rows, i, len) {\r\n                    if(orderbook.bids){\r\n                      while (i < len) {\r\n                        rows.push(\r\n                          <tr key={i}>\r\n                            <td className=\"text-success\">{fixedLength(Number(orderbook.bids[i][0]))}</td>\r\n                            <td>{fixedLength(Number(orderbook.bids[i][1]))}</td>\r\n                            <td>{fixedLength(Number(orderbook.bids[i][1])*Number(orderbook.bids[i][0]))}</td>\r\n                            <td className=\"tr-shadow\" style={{\"background\": \"rgba(0, 192, 135, 0.15)\", \"width\": getPercent(orderbook.bids,orderbook.bids[i][1])+\"%\"}}></td>\r\n                          </tr>\r\n                        );\r\n                        i++;\r\n                      }\r\n                    }\r\n                    return rows;\r\n                  })([], 0, orderbookcount)\r\n                }\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div className=\"tab-pane fade\" id=\"pills-graph-down\" role=\"tabpanel\" aria-labelledby=\"pills-graph-down-tab\">\r\n          <div className=\"table-responsive\">\r\n            <table className=\"table text-white table-sm table-borderless\">\r\n              <thead className=\"text-muted\">\r\n                <tr>\r\n                  <th scope=\"col\">Price</th>\r\n                  <th scope=\"col\">Amount</th>\r\n                  <th scope=\"col\">Total</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                { \r\n                  (function (rows) {\r\n                    if(orderbook.asks){\r\n                      const len = orderbook.asks.length;\r\n                      let i=0;\r\n                      while (i < len) {\r\n                        rows.push(\r\n                          <tr key={i}>\r\n                            <td className=\"text-danger\">{fixedLength(Number(orderbook.asks[len-i-1][0]))}</td>\r\n                            <td>{fixedLength(Number(orderbook.asks[len-i-1][1]))}</td>\r\n                            <td>{fixedLength(Number(orderbook.asks[len-i-1][1])*Number(orderbook.asks[len-i-1][0]))}</td>\r\n                          </tr>\r\n                        );\r\n                        i++;\r\n                      }\r\n                    }\r\n                    return rows;\r\n                  })([])\r\n                }\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n        <div className=\"tab-pane fade\" id=\"pills-graph-up\" role=\"tabpanel\" aria-labelledby=\"pills-graph-up-tab\">\r\n          <div className=\"table-responsive\">\r\n            <table className=\"table text-white table-sm table-borderless\">\r\n              <thead className=\"text-muted\">\r\n                <tr>\r\n                  <th scope=\"col\">Price</th>\r\n                  <th scope=\"col\">Amount</th>\r\n                  <th scope=\"col\">Total</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                { \r\n                  (function (rows, i, len) {\r\n                    if(orderbook.bids){\r\n                      const len =  orderbook.bids.length;\r\n                      let i=0;\r\n\r\n                      while (i < len) {\r\n                        rows.push(\r\n                          <tr key={i}>\r\n                            <td className=\"text-success\">{fixedLength(Number(orderbook.bids[i][0]))}</td>\r\n                            <td>{fixedLength(Number(orderbook.bids[i][1]))}</td>\r\n                            <td>{fixedLength(Number(orderbook.bids[i][1])*Number(orderbook.bids[i][0]))}</td>\r\n                          </tr>\r\n                        );\r\n                        i++;\r\n                      }\r\n                    }\r\n                    return rows;\r\n                  })([], 0, 6)\r\n                }\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Orderbook;\r\n"]},"metadata":{},"sourceType":"module"}